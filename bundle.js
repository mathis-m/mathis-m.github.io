!function(n){var t={};function e(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:r})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var o in n)e.d(r,o,function(t){return n[t]}.bind(null,o));return r},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=0)}([function(n,t,e){"use strict";e.r(t);var r=function(){return function(n,t){this.toNode=n,this.cost=t}}(),o=function(){return function(n,t,e){this.name=n,this.value=t,this.links=e}}(),i=function(){return function(n,t){this.nodes=n,this.cost=t}}(),s=function(){function n(n){this.shortestLinks=[],this.allNodes=[];for(var t=n.slice(),e=(t=t.sort(function(n,t){return n.cost-t.cost}).reverse()).flatMap(function(n){return n.nodes}),r=new Map,o=0,i=e;o<i.length;o++){var s=i[o];r.has(s.name)||(r.set(s.name,!0),this.allNodes.push(s))}for(this.root=this.allNodes.sort(function(n,t){return n.value-t.value})[0],console.log(t.slice());!this.allNodesAreConnected(this.allNodes);){var u=t.pop();if(this.shortestLinks.push(u),this.allNodesAreConnected(this.allNodes)){for(var c=void 0,a=c=this.shortestLinks.slice();c;)a=c,c=this.tryToRemove(c);a.length<this.shortestLinks.length&&(this.shortestLinks=a)}}console.log(this.shortestLinks)}return n.prototype.allNodesAreConnected=function(n,t){void 0===t&&(t=this.shortestLinks);for(var e=[],r=t.flatMap(function(n){return n.nodes}),o=new Map,i=0,s=r;i<s.length;i++){var u=s[i];o.has(u.name)||(o.set(u.name,!0),e.push(u))}var c,a=e.length===n.length;if(a){var h=this.allNodes.slice(),f=function(n){var e;e=n,h.splice(h.findIndex(function(n){return n.name===e.name}),1),function(n){return t.filter(function(t){return-1!==t.nodes.findIndex(function(t){return t.name===n.name})}).flatMap(function(t){return t.nodes.find(function(t){return t.name!==n.name})}).filter(function(n){return-1!==h.findIndex(function(t){return t.name===n.name})})}(n).forEach(function(n){return f(n)})};f(this.root),c=0===h.length}return a&&c},n.prototype.tryToRemove=function(n){for(var t,e=function(e){var o=n.slice();if(o.splice(o.findIndex(function(n){return n===e}),1),r.allNodesAreConnected(r.allNodes,o))return t=o,"break"},r=this,o=0,i=n;o<i.length;o++){if("break"===e(i[o]))break}return t},n.prototype.linkToString=function(){var n=this.shortestLinks.map(function(n){return new i(n.nodes.sort(function(n,t){return n.name<t.name?-1:n.name>t.name?1:0}),n.cost)}).sort(function(n,t){if(n.nodes[0].name<t.nodes[0].name)return-1;if(n.nodes[0].name>t.nodes[0].name)return 1;if(n.nodes[0].name===t.nodes[0].name){if(n.nodes[1].name<t.nodes[1].name)return-1;if(n.nodes[1].name>t.nodes[1].name)return 1}return 0}),t="";return n.forEach(function(n){t+=n.nodes[0].name+" - "+n.nodes[1].name+";\n\t"}),t},n}(),u=function(n,t,e,r){return new(e||(e=Promise))(function(o,i){function s(n){try{c(r.next(n))}catch(n){i(n)}}function u(n){try{c(r.throw(n))}catch(n){i(n)}}function c(n){n.done?o(n.value):new e(function(t){t(n.value)}).then(s,u)}c((r=r.apply(n,t||[])).next())})},c=function(n,t){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(n,s)}catch(n){i=[6,n],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},a=function(){function n(n,t,e,r){var o=this;this.rootOfIndexing=!1,this.returnTo=[],this.DISCOVERED_LINKS=[],this.name=n,this.value=t,this.connection=e,this.connection.receive.subscribe(function(n){return o.receive(n)}),this.dumpChanges=function(){return r(o)}}return n.prototype.indexNetwork=function(){return u(this,void 0,void 0,function(){var n,t=this;return c(this,function(e){switch(e.label){case 0:return this.rootOfIndexing=!0,this.dumpChanges(),[4,this.connection.ping];case 1:return n=e.sent(),this.WAITING_FOR_BRIDGES=n,n.forEach(function(n){t.send({protocol:"CSTP",content:{message:"Dear Neighbor hear is my name and the package provides you the cost to me. Follow the CSTP.",from:{name:t.name,value:t.value}},target:n})}),[2]}})})},n.prototype.send=function(n){this.connection.send.next(n)},n.prototype.handleCSTPPackage=function(n){var t,e=this;if(!(this.INDEXED||this.rootOfIndexing&&n.content.from)){if(console.log(this.name,"received pkg"),0!==this.DISCOVERED_LINKS.length||this.rootOfIndexing||(this.connection.ping.then(function(t){if(e.WAITING_FOR_BRIDGES=t.filter(function(t){return t!==n.content.from.name}),e.dumpChanges(),console.log(e.name," waiting for:",e.WAITING_FOR_BRIDGES),e.WAITING_FOR_BRIDGES.forEach(function(n){return e.send({protocol:"CSTP",content:{message:"Dear Neighbor hear is my name and the package provides you the cost to me. Follow the CSTP.",from:{name:e.name,value:e.value}},target:n})}),0===e.WAITING_FOR_BRIDGES.length){var r=e.DISCOVERED_LINKS[0].nodes.find(function(n){return n.name!==e.name});if(e.dumpChanges(),e.send({protocol:"CSTP",content:{message:"Dear Neighbor hear are my discovered links, you may concat them with yours and send them back!",discoveredLinks:e.DISCOVERED_LINKS},target:r.name}),e.INDEXED=!0,e.rootOfIndexing){var o=new s(e.DISCOVERED_LINKS);e.MST=o,e.connection.finishedIndexing.next(o)}else e.connection.finishedIndexing.next();e.dumpChanges()}}),this.DISCOVERED_LINKS.push({cost:n.cost,nodes:[{name:this.name,value:this.value},n.content.from]}),this.returnTo.push(n.content.from.name),this.dumpChanges(),console.log("returning from ",this.name,"to ",this.returnTo)),this.WAITING_FOR_BRIDGES&&n.content.discoveredLinks){var r=n.content.discoveredLinks[0].nodes.find(function(n){return n.name!==e.name});this.WAITING_FOR_BRIDGES.splice(this.WAITING_FOR_BRIDGES.findIndex(function(n){return n===r}),1),console.log(this.name," waiting for:",this.WAITING_FOR_BRIDGES),(t=this.DISCOVERED_LINKS).push.apply(t,n.content.discoveredLinks)}else this.WAITING_FOR_BRIDGES&&n.content.from&&(this.WAITING_FOR_BRIDGES.splice(this.WAITING_FOR_BRIDGES.findIndex(function(t){return t===n.content.from.name}),1),console.log(this.name," waiting for:",this.WAITING_FOR_BRIDGES),this.returnTo.push(n.content.from.name),console.log("returning from ",this.name,"to ",this.returnTo),this.DISCOVERED_LINKS.push({cost:n.cost,nodes:[{name:this.name,value:this.value},n.content.from]}));if(this.dumpChanges(),this.WAITING_FOR_BRIDGES&&0===this.WAITING_FOR_BRIDGES.length){if(console.log(this.name,"sending",this.DISCOVERED_LINKS),this.returnTo.forEach(function(n){e.send({protocol:"CSTP",content:{message:"Dear Neighbor hear are my discovered links, you may concat them with yours and send them back!",discoveredLinks:e.DISCOVERED_LINKS},target:n})}),this.INDEXED=!0,console.log("Node has finished ",this.name),this.rootOfIndexing){var o=[];this.DISCOVERED_LINKS.forEach(function(n){o.find(function(t){return-1!==n.nodes.findIndex(function(n){return n.name===t.nodes[0].name})&&-1!==n.nodes.findIndex(function(n){return n.name===t.nodes[1].name})})||o.push(n)}),console.log("dl",this.DISCOVERED_LINKS.map(function(n){return n.nodes})),console.log("l",o);var i=new s(o);this.MST=i,this.connection.finishedIndexing.next(i)}else this.connection.finishedIndexing.next();this.dumpChanges()}}},n.prototype.receive=function(n){"CSTP"===n.protocol&&this.handleCSTPPackage(n)},n}(),h=function(n,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e])})(n,t)};function f(n,t){function e(){this.constructor=n}h(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}function l(n){return"function"==typeof n}var d=!1,p={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){n&&(new Error).stack;d=n},get useDeprecatedSynchronousErrorHandling(){return d}};function b(n){setTimeout(function(){throw n})}var m={closed:!0,next:function(n){},error:function(n){if(p.useDeprecatedSynchronousErrorHandling)throw n;b(n)},complete:function(){}},y=Array.isArray||function(n){return n&&"number"==typeof n.length};function g(n){return Error.call(this),this.message=n?n.length+" errors occurred during unsubscription:\n"+n.map(function(n,t){return t+1+") "+n.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=n,this}g.prototype=Object.create(Error.prototype);var v=g,_=function(){function n(n){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,n&&(this._unsubscribe=n)}var t;return n.prototype.unsubscribe=function(){var n,t=!1;if(!this.closed){var e=this._parent,r=this._parents,o=this._unsubscribe,i=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var s,u=-1,c=r?r.length:0;e;)e.remove(this),e=++u<c&&r[u]||null;if(l(o))try{o.call(this)}catch(e){t=!0,n=e instanceof v?E(e.errors):[e]}if(y(i))for(u=-1,c=i.length;++u<c;){var a=i[u];if(null!==(s=a)&&"object"==typeof s)try{a.unsubscribe()}catch(e){t=!0,n=n||[],e instanceof v?n=n.concat(E(e.errors)):n.push(e)}}if(t)throw new v(n)}},n.prototype.add=function(t){var e=t;switch(typeof t){case"function":e=new n(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof n)){var r=e;(e=new n)._subscriptions=[r]}break;default:if(!t)return n.EMPTY;throw new Error("unrecognized teardown "+t+" added to Subscription.")}if(e._addParent(this)){var o=this._subscriptions;o?o.push(e):this._subscriptions=[e]}return e},n.prototype.remove=function(n){var t=this._subscriptions;if(t){var e=t.indexOf(n);-1!==e&&t.splice(e,1)}},n.prototype._addParent=function(n){var t=this._parent,e=this._parents;return t!==n&&(t?e?-1===e.indexOf(n)&&(e.push(n),!0):(this._parents=[n],!0):(this._parent=n,!0))},n.EMPTY=((t=new n).closed=!0,t),n}();function E(n){return n.reduce(function(n,t){return n.concat(t instanceof v?t.errors:t)},[])}var S="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),w=function(n){function t(e,r,o){var i=n.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=m;break;case 1:if(!e){i.destination=m;break}if("object"==typeof e){e instanceof t?(i.syncErrorThrowable=e.syncErrorThrowable,i.destination=e,e.add(i)):(i.syncErrorThrowable=!0,i.destination=new I(i,e));break}default:i.syncErrorThrowable=!0,i.destination=new I(i,e,r,o)}return i}return f(t,n),t.prototype[S]=function(){return this},t.create=function(n,e,r){var o=new t(n,e,r);return o.syncErrorThrowable=!1,o},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,n.prototype.unsubscribe.call(this))},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){this.destination.error(n),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var n=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=n,this._parents=t,this},t}(_),I=function(n){function t(t,e,r,o){var i,s=n.call(this)||this;s._parentSubscriber=t;var u=s;return l(e)?i=e:e&&(i=e.next,r=e.error,o=e.complete,e!==m&&(l((u=Object.create(e)).unsubscribe)&&s.add(u.unsubscribe.bind(u)),u.unsubscribe=s.unsubscribe.bind(s))),s._context=u,s._next=i,s._error=r,s._complete=o,s}return f(t,n),t.prototype.next=function(n){if(!this.isStopped&&this._next){var t=this._parentSubscriber;p.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,n)&&this.unsubscribe():this.__tryOrUnsub(this._next,n)}},t.prototype.error=function(n){if(!this.isStopped){var t=this._parentSubscriber,e=p.useDeprecatedSynchronousErrorHandling;if(this._error)e&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,n),this.unsubscribe()):(this.__tryOrUnsub(this._error,n),this.unsubscribe());else if(t.syncErrorThrowable)e?(t.syncErrorValue=n,t.syncErrorThrown=!0):b(n),this.unsubscribe();else{if(this.unsubscribe(),e)throw n;b(n)}}},t.prototype.complete=function(){var n=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var e=function(){return n._complete.call(n._context)};p.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(n,t){try{n.call(this._context,t)}catch(n){if(this.unsubscribe(),p.useDeprecatedSynchronousErrorHandling)throw n;b(n)}},t.prototype.__tryOrSetError=function(n,t,e){if(!p.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,e)}catch(t){return p.useDeprecatedSynchronousErrorHandling?(n.syncErrorValue=t,n.syncErrorThrown=!0,!0):(b(t),!0)}return!1},t.prototype._unsubscribe=function(){var n=this._parentSubscriber;this._context=null,this._parentSubscriber=null,n.unsubscribe()},t}(w);var x="function"==typeof Symbol&&Symbol.observable||"@@observable";function O(){}function D(n){return n?1===n.length?n[0]:function(t){return n.reduce(function(n,t){return t(n)},t)}:O}var T=function(){function n(n){this._isScalar=!1,n&&(this._subscribe=n)}return n.prototype.lift=function(t){var e=new n;return e.source=this,e.operator=t,e},n.prototype.subscribe=function(n,t,e){var r=this.operator,o=function(n,t,e){if(n){if(n instanceof w)return n;if(n[S])return n[S]()}return n||t||e?new w(n,t,e):new w(m)}(n,t,e);if(r?o.add(r.call(o,this.source)):o.add(this.source||p.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),p.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},n.prototype._trySubscribe=function(n){try{return this._subscribe(n)}catch(t){p.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=t),!function(n){for(;n;){var t=n,e=t.closed,r=t.destination,o=t.isStopped;if(e||o)return!1;n=r&&r instanceof w?r:null}return!0}(n)?console.warn(t):n.error(t)}},n.prototype.forEach=function(n,t){var e=this;return new(t=N(t))(function(t,r){var o;o=e.subscribe(function(t){try{n(t)}catch(n){r(n),o&&o.unsubscribe()}},r,t)})},n.prototype._subscribe=function(n){var t=this.source;return t&&t.subscribe(n)},n.prototype[x]=function(){return this},n.prototype.pipe=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return 0===n.length?this:D(n)(this)},n.prototype.toPromise=function(n){var t=this;return new(n=N(n))(function(n,e){var r;t.subscribe(function(n){return r=n},function(n){return e(n)},function(){return n(r)})})},n.create=function(t){return new n(t)},n}();function N(n){if(n||(n=p.Promise||Promise),!n)throw new Error("no Promise impl found");return n}function k(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}k.prototype=Object.create(Error.prototype);var R=k,B=function(n){function t(t,e){var r=n.call(this)||this;return r.subject=t,r.subscriber=e,r.closed=!1,r}return f(t,n),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var n=this.subject,t=n.observers;if(this.subject=null,t&&0!==t.length&&!n.isStopped&&!n.closed){var e=t.indexOf(this.subscriber);-1!==e&&t.splice(e,1)}}},t}(_),C=function(n){function t(t){var e=n.call(this,t)||this;return e.destination=t,e}return f(t,n),t}(w),P=function(n){function t(){var t=n.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return f(t,n),t.prototype[S]=function(){return new C(this)},t.prototype.lift=function(n){var t=new G(this,this);return t.operator=n,t},t.prototype.next=function(n){if(this.closed)throw new R;if(!this.isStopped)for(var t=this.observers,e=t.length,r=t.slice(),o=0;o<e;o++)r[o].next(n)},t.prototype.error=function(n){if(this.closed)throw new R;this.hasError=!0,this.thrownError=n,this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),o=0;o<e;o++)r[o].error(n);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new R;this.isStopped=!0;for(var n=this.observers,t=n.length,e=n.slice(),r=0;r<t;r++)e[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new R;return n.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(n){if(this.closed)throw new R;return this.hasError?(n.error(this.thrownError),_.EMPTY):this.isStopped?(n.complete(),_.EMPTY):(this.observers.push(n),new B(this,n))},t.prototype.asObservable=function(){var n=new T;return n.source=this,n},t.create=function(n,t){return new G(n,t)},t}(T),G=function(n){function t(t,e){var r=n.call(this)||this;return r.destination=t,r.source=e,r}return f(t,n),t.prototype.next=function(n){var t=this.destination;t&&t.next&&t.next(n)},t.prototype.error=function(n){var t=this.destination;t&&t.error&&this.destination.error(n)},t.prototype.complete=function(){var n=this.destination;n&&n.complete&&this.destination.complete()},t.prototype._subscribe=function(n){return this.source?this.source.subscribe(n):_.EMPTY},t}(P),L=function(){return function(n){this.send=new P,this.receive=new P,this.finishedIndexing=new P,this.ping=new Promise(function(t){return t(n)})}}(),A=function(n,t,e,r){return new(e||(e=Promise))(function(o,i){function s(n){try{c(r.next(n))}catch(n){i(n)}}function u(n){try{c(r.throw(n))}catch(n){i(n)}}function c(n){n.done?o(n.value):new e(function(t){t(n.value)}).then(s,u)}c((r=r.apply(n,t||[])).next())})},j=function(n,t){var e,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(n,s)}catch(n){i=[6,n],r=0}finally{e=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},F=function(){function n(n,t){void 0===t&&(t=.5);var e=this;this.nodes=n,this.bridges=[],this.startIndexingFromRandomBridge=function(){return new Promise(function(n){return A(e,void 0,void 0,function(){var t;return j(this,function(e){return t=this.bridges[Math.round(Math.random()*this.bridges.length)],console.log(this.bridges,t),t.connection.finishedIndexing.subscribe(function(t){return n(t)}),t.indexNetwork().then(function(){return console.log("wtf")}),[2]})})})},this.id=0;var r=document.getElementById("container_target");r.childNodes.forEach(function(n){return n.remove()}),r.childNodes.forEach(function(n){return n.remove()}),r.childNodes.forEach(function(n){return n.remove()});r.insertAdjacentElement("beforeend",(new DOMParser).parseFromString('\n<div class="item" id="init_pkg">\n    <h3>Packages:</h3>\n    <div id="pkg_s_target">\n\n    </div>\n</div>\n',"text/html").getElementById("init_pkg")),n.forEach(function(n){var t=n.links.map(function(n){return n.toNode}),r=new L(t);e.bridges.push(new a(n.name,n.value,r,e.dumpBridge))}),this.bridges.forEach(function(r){var o=n.find(function(n){return n.name===r.name}).links,i=o.map(function(n){return n.toNode});r.connection.send.subscribe(function(n){if(console.log(r.name+">>>"+n.target),i.find(function(t){return t===n.target})){n.cost=o.find(function(t){return t.toNode===n.target}).cost;var s=e.dumpPkg(n,r.name);setTimeout(function(){s(),e.bridges.find(function(t){return t.name===n.target}).connection.receive.next(n)},1e3*n.cost*t)}})}),this.createDomBridges()}return n.prototype.dumpPkg=function(n,t){var e=document.getElementById("pkg_s_target"),r=this.id++;return e.insertAdjacentElement("beforeend",(new DOMParser).parseFromString(function(n,t){return'\n<div id="pkg_'+r+'">\n    '+t+" -> "+n.target+" : "+n.cost+"\n</div>\n"}(n,t),"text/html").getElementById("pkg_"+r)),function(){e.removeChild(document.getElementById("pkg_"+r))}},n.prototype.createDomBridges=function(){var n=document.getElementById("container_target");this.bridges.sort(function(n,t){return n.name<t.name?-1:n.name>t.name?1:0}).forEach(function(t){n.insertAdjacentElement("beforeend",(new DOMParser).parseFromString(function(n){return'\n<div class="item" id="bridge_'+n.value+'">\n    <h3>Bridge '+n.name+"</h3>\n</div>\n"}(t),"text/html").getElementById("bridge_"+t.value))})},n.prototype.dumpBridge=function(n){document.getElementById("bridge_"+n.value).replaceWith((new DOMParser).parseFromString(function(n){return'\n<div class="item" id="bridge_'+n.value+'">\n    <div style="width: 100%; height: 100%; overflow-y: auto">\n        <h3>Bridge '+n.name+"</h3>\n        "+(n.rootOfIndexing?"Indexing Root!":"")+"<br>\n        Known links: [<br><BLOCKQUOTE>"+n.DISCOVERED_LINKS.map(function(n){return n.nodes.map(function(n){return n.name}).join("-")+":"+n.cost}).join(",<br>")+"</BLOCKQUOTE><br>]<br>\n        "+(!n.rootOfIndexing&&n.INDEXED?"Node has finished indexing!<br>Returning Data to: [<br><BLOCKQUOTE>"+n.returnTo.join(",<br>")+"</BLOCKQUOTE><br>]":"")+"\n        "+(n.rootOfIndexing&&n.INDEXED?"Network has finished indexing!<br>MST generated.<br>Sending MST to: [<br><BLOCKQUOTE>"+n.MST.allNodes.map(function(n){return n.name}).filter(function(t){return t!==n.name}).join(",<br>")+"</BLOCKQUOTE><br>]":"")+"\n        \n    </div>\n</div>\n"}(n),"text/html").getElementById("bridge_"+n.value))},n}(),M=document.getElementById("textIn"),K=document.getElementById("textOut"),V=document.getElementById("simulate_btn");M.value="\nGraph mygraph {\n\t// Node\n\tA = 5;\n\tB = 1;\n\tC = 3;\n\tD = 7;\n\tE = 6;\n\tF = 4;\n\t\n\t// Links und zugeh. Kosten\n\tA - B : 10;\n\tA - C : 10;\n\tB - D : 15;\n\tB - E : 10;\n\tC - D : 3;\n\tC - E : 10;\n\tD - E : 2;\n\tD - F : 10;\n\tE - F : 2;\n}",console.log(M);V.addEventListener("click",function(){var n=function(n){for(var t=[],e=[],i=n.match(/(?<=Graph[ ])(\S+)/g)[0],s=n.match(/[^\s]+(?= =)|(?<== )[1-9]*/g),u=n.match(/[^\s]+(?= -)|[^\s]+(?= :)|(?<=: )[0-9]*/g),c=0;c<u.length;c+=3)t.push({nodes:[u[c],u[c+1]],cost:+u[c+2]});var a=function(n){var i=s[n],u=+s[n+1],c=t.filter(function(n){return-1!==n.nodes.findIndex(function(n){return n===i})}).map(function(n){return new r(n.nodes.find(function(n){return n!==i}),n.cost)});e.push(new o(i,u,c))};for(c=0;c<s.length;c+=2)a(c);return{graphName:i,nodes:e}}(M.value),t=new F(n.nodes,+document.getElementById("mult").value);console.log(t),t.startIndexingFromRandomBridge().then(function(t){var e;K.value=(e=t,"\nSpanning-Tree of "+n.graphName+" {\n\tRoot: "+e.root.name+";\n\t"+e.linkToString()+"\n}")})})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9TcGFubmluZ1RyZWUvc3Bhbm5pbmdUcmVlTGluay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1NwYW5uaW5nVHJlZS9zcGFubmluZ1RyZWVOb2RlLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvU2ltdWxhdGlvbi9TaW11bGF0aW9uTGluay50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1NwYW5uaW5nVHJlZS9taW5pbWFsU3Bhbm5pbmdUcmVlLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvU2ltdWxhdGlvbi9CcmlkZ2UudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL2lzRnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvY29uZmlnLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaG9zdFJlcG9ydEVycm9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL09ic2VydmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaXNBcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL1Vuc3Vic2NyaXB0aW9uRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvU3Vic2NyaXB0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvaXNPYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvc3ltYm9sL3J4U3Vic2NyaWJlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9TdWJzY3JpYmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3N5bWJvbC9vYnNlcnZhYmxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvbm9vcC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL3BpcGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvT2JzZXJ2YWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL3RvU3Vic2NyaWJlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC91dGlsL2NhblJlcG9ydEVycm9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yeGpzL19lc201L2ludGVybmFsL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3J4anMvX2VzbTUvaW50ZXJuYWwvU3ViamVjdFN1YnNjcmlwdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcnhqcy9fZXNtNS9pbnRlcm5hbC9TdWJqZWN0LmpzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvU2ltdWxhdGlvbi9TaW11bGF0aW9uQ29ubmVjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL1NpbXVsYXRpb24vU2ltdWxhdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvcGFyc2VyL2dyYXBoUGFyc2VyLnRzIiwid2VicGFjazovLy8uL3NyYy9wYXJzZXIvbXN0U3RyaW5naWZ5LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiU3Bhbm5pbmdUcmVlTGluayIsInRvTm9kZSIsImNvc3QiLCJ0aGlzIiwiU3Bhbm5pbmdUcmVlTm9kZSIsImxpbmtzIiwiU2ltdWxhdGlvbkxpbmsiLCJub2RlcyIsIm1pbmltYWxTcGFubmluZ1RyZWVfTWluaW1hbFNwYW5UcmVlIiwiTWluaW1hbFNwYW5UcmVlIiwic3BhblRyZWVMaW5rcyIsInNob3J0ZXN0TGlua3MiLCJhbGxOb2RlcyIsInNsaWNlIiwiYXJyYXkiLCJzb3J0IiwiYSIsImIiLCJyZXZlcnNlIiwiZmxhdE1hcCIsIm1hcCIsIk1hcCIsIl9pIiwiYXJyYXlfMSIsImxlbmd0aCIsIml0ZW0iLCJoYXMiLCJzZXQiLCJwdXNoIiwicm9vdCIsImNvbnNvbGUiLCJsb2ciLCJhbGxOb2Rlc0FyZUNvbm5lY3RlZCIsIml0ZW1zIiwicG9wIiwidGVtcCIsImxhc3QiLCJ0cnlUb1JlbW92ZSIsInJlc3VsdCIsImFycmF5XzIiLCJhbGxOb2Rlc0FyZUluY2x1ZGVkIiwibm9kZXNUb0ZpbmRfMSIsInRyYXZlcnNlXzEiLCJjdXJyZW50Tm9kZSIsIm5vZGUiLCJzcGxpY2UiLCJmaW5kSW5kZXgiLCJmaWx0ZXIiLCJsaW5rIiwiZmluZCIsIm4xIiwiZ2V0RGlyZWN0Q29ubmVjdGVkXzEiLCJmb3JFYWNoIiwibmV4dCIsInJlcyIsInNpbXVsYXRpb25MaW5rcyIsInRoaXNfMSIsInNob3J0ZXN0TGlua3NfMSIsImxpbmtUb1N0cmluZyIsInNvcnRlZCIsInJldCIsIkJyaWRnZV9CcmlkZ2UiLCJCcmlkZ2UiLCJjb25uZWN0aW9uIiwiZHVtcENoYW5nZXMiLCJfdGhpcyIsInJvb3RPZkluZGV4aW5nIiwicmV0dXJuVG8iLCJESVNDT1ZFUkVEX0xJTktTIiwicmVjZWl2ZSIsInN1YnNjcmliZSIsInBrZyIsImluZGV4TmV0d29yayIsInBpbmciLCJzaWJsaW5ncyIsIl9hIiwic2VudCIsIldBSVRJTkdfRk9SX0JSSURHRVMiLCJ0YXJnZXQiLCJzZW5kIiwicHJvdG9jb2wiLCJjb250ZW50IiwibWVzc2FnZSIsImZyb20iLCJoYW5kbGVDU1RQUGFja2FnZSIsIklOREVYRUQiLCJ0aGVuIiwiYnJpZGdlcyIsImRpc2NvdmVyZWRMaW5rcyIsIm1zdCIsIk1TVCIsImZpbmlzaGVkSW5kZXhpbmciLCJuYW1lXzEiLCJhcHBseSIsImxpbmtzXzEiLCJleHRlbmRTdGF0aWNzIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJBcnJheSIsIl9fZXh0ZW5kcyIsIl9fIiwiY29uc3RydWN0b3IiLCJpc0Z1bmN0aW9uIiwieCIsIl9lbmFibGVfc3VwZXJfZ3Jvc3NfbW9kZV90aGF0X3dpbGxfY2F1c2VfYmFkX3RoaW5ncyIsImNvbmZpZyIsIlByb21pc2UiLCJ1bmRlZmluZWQiLCJ1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nIiwiRXJyb3IiLCJzdGFjayIsImhvc3RSZXBvcnRFcnJvciIsImVyciIsInNldFRpbWVvdXQiLCJlbXB0eSIsImNsb3NlZCIsImVycm9yIiwiY29tcGxldGUiLCJpc0FycmF5IiwiVW5zdWJzY3JpcHRpb25FcnJvckltcGwiLCJlcnJvcnMiLCJ0b1N0cmluZyIsImpvaW4iLCJVbnN1YnNjcmlwdGlvbkVycm9yIiwiU3Vic2NyaXB0aW9uX1N1YnNjcmlwdGlvbiIsIlN1YnNjcmlwdGlvbiIsInVuc3Vic2NyaWJlIiwiX3BhcmVudCIsIl9wYXJlbnRzIiwiX3N1YnNjcmlwdGlvbnMiLCJfdW5zdWJzY3JpYmUiLCJoYXNFcnJvcnMiLCJpbmRleCIsImxlbiIsInJlbW92ZSIsImUiLCJmbGF0dGVuVW5zdWJzY3JpcHRpb25FcnJvcnMiLCJzdWIiLCJjb25jYXQiLCJhZGQiLCJ0ZWFyZG93biIsInN1YnNjcmlwdGlvbiIsInRtcCIsIkVNUFRZIiwiX2FkZFBhcmVudCIsInN1YnNjcmlwdGlvbnMiLCJzdWJzY3JpcHRpb25JbmRleCIsImluZGV4T2YiLCJwYXJlbnQiLCJyZWR1Y2UiLCJlcnJzIiwicnhTdWJzY3JpYmVyIiwiTWF0aCIsInJhbmRvbSIsIlN1YnNjcmliZXJfU3Vic2NyaWJlciIsIl9zdXBlciIsIlN1YnNjcmliZXIiLCJkZXN0aW5hdGlvbk9yTmV4dCIsInN5bmNFcnJvclZhbHVlIiwic3luY0Vycm9yVGhyb3duIiwic3luY0Vycm9yVGhyb3dhYmxlIiwiaXNTdG9wcGVkIiwiYXJndW1lbnRzIiwiZGVzdGluYXRpb24iLCJTdWJzY3JpYmVyX1NhZmVTdWJzY3JpYmVyIiwic3Vic2NyaWJlciIsIl9uZXh0IiwiX2Vycm9yIiwiX2NvbXBsZXRlIiwiX3Vuc3Vic2NyaWJlQW5kUmVjeWNsZSIsIlNhZmVTdWJzY3JpYmVyIiwiX3BhcmVudFN1YnNjcmliZXIiLCJvYnNlcnZlck9yTmV4dCIsImNvbnRleHQiLCJfY29udGV4dCIsIl9fdHJ5T3JTZXRFcnJvciIsIl9fdHJ5T3JVbnN1YiIsIndyYXBwZWRDb21wbGV0ZSIsImZuIiwib2JzZXJ2YWJsZV9vYnNlcnZhYmxlIiwib2JzZXJ2YWJsZSIsIm5vb3AiLCJwaXBlRnJvbUFycmF5IiwiZm5zIiwiaW5wdXQiLCJwcmV2IiwiT2JzZXJ2YWJsZV9PYnNlcnZhYmxlIiwiT2JzZXJ2YWJsZSIsIl9pc1NjYWxhciIsIl9zdWJzY3JpYmUiLCJsaWZ0Iiwib3BlcmF0b3IiLCJzb3VyY2UiLCJzaW5rIiwibmV4dE9yT2JzZXJ2ZXIiLCJ0b1N1YnNjcmliZXIiLCJfdHJ5U3Vic2NyaWJlIiwib2JzZXJ2ZXIiLCJjbG9zZWRfMSIsImNhblJlcG9ydEVycm9yIiwid2FybiIsInByb21pc2VDdG9yIiwiZ2V0UHJvbWlzZUN0b3IiLCJyZXNvbHZlIiwicmVqZWN0IiwicGlwZSIsIm9wZXJhdGlvbnMiLCJ0b1Byb21pc2UiLCJPYmplY3RVbnN1YnNjcmliZWRFcnJvckltcGwiLCJPYmplY3RVbnN1YnNjcmliZWRFcnJvciIsIlN1YmplY3RTdWJzY3JpcHRpb25fU3ViamVjdFN1YnNjcmlwdGlvbiIsIlN1YmplY3RTdWJzY3JpcHRpb24iLCJzdWJqZWN0Iiwib2JzZXJ2ZXJzIiwic3Vic2NyaWJlckluZGV4IiwiU3ViamVjdF9TdWJqZWN0U3Vic2NyaWJlciIsIlN1YmplY3RTdWJzY3JpYmVyIiwiU3ViamVjdF9TdWJqZWN0IiwiU3ViamVjdCIsImhhc0Vycm9yIiwidGhyb3duRXJyb3IiLCJTdWJqZWN0X0Fub255bW91c1N1YmplY3QiLCJjb3B5IiwiYXNPYnNlcnZhYmxlIiwiQW5vbnltb3VzU3ViamVjdCIsIlNpbXVsYXRpb25Db25uZWN0aW9uX1NpbXVsYXRpb25Db25uZWN0aW9uIiwic2libGluZ0JyaWRnZXMiLCJTaW11bGF0aW9uX1NpbXVsYXRpb24iLCJTaW11bGF0aW9uIiwibXVsdGlwbGljYXRvckZvckNvc3RJblNlY29uZHMiLCJzdGFydEluZGV4aW5nRnJvbVJhbmRvbUJyaWRnZSIsIlNpbXVsYXRpb25fYXdhaXRlciIsImJyaWRnZSIsInJvdW5kIiwiaWQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY2hpbGROb2RlcyIsImluc2VydEFkamFjZW50RWxlbWVudCIsIkRPTVBhcnNlciIsInBhcnNlRnJvbVN0cmluZyIsInNpYmxpbmdOb2RlcyIsImNvbm4iLCJkdW1wQnJpZGdlIiwiY2JfMSIsImR1bXBQa2ciLCJjcmVhdGVEb21CcmlkZ2VzIiwicGtnX3NfdGFyZ2V0IiwibnVtYmVyIiwicGtnVGVtcGxhdGUiLCJyZW1vdmVDaGlsZCIsImJyaWRnZVRlbXBsYXRlIiwicmVwbGFjZVdpdGgiLCJpbnB1dEFyZWEiLCJvdXRwdXRBcmVhIiwic2ltdWxhdGlvbkJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJwYXJzZVJlc3VsdCIsInRlbXBMaW5rcyIsImdyYXBoTmFtZSIsIm1hdGNoIiwibm9kZU1hdGNoZXMiLCJsaW5rTWF0Y2hlcyIsInBhcnNlIiwic2ltdWxhdGlvbiIsIm1pbmltYWxTcGFuVHJlZSJdLCJtYXBwaW5ncyI6ImFBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQUtBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdBQ0FaLEVBQUFhLEVBQUFYLEVBQUFTLElBQ0FHLE9BQUFDLGVBQUFiLEVBQUFTLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLFlBQUEsQ0FBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxp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QUFHQSxFQUFJc1MsRUFBWTlPLE9BQVF4RCxHQUFRLEVBQy9Da1MsRUFBVXRPLEtBQUssQ0FDZHJCLE1BQU8sQ0FBQytQLEVBQVl0UyxHQUFJc1MsRUFBWXRTLEVBQUksSUFDeENrQyxNQUFPb1EsRUFBWXRTLEVBQUksb0JBR2hCQSxHQUNSLElBQU00SCxFQUFPeUssRUFBWXJTLEdBQ25CaUIsR0FBU29SLEVBQVlyUyxFQUFJLEdBQ3pCcUMsRUFBUTZQLEVBQVVuTixPQUFPLFNBQUE5RSxHQUFLLE9BQXdDLElBQXhDQSxFQUFFc0MsTUFBTXVDLFVBQVUsU0FBQXJELEdBQUssT0FBQUEsSUFBTW1HLE1BQy9EeEUsSUFBSSxTQUFBNEIsR0FBUSxXQUFJaEQsRUFBaUJnRCxFQUFLekMsTUFBTTBDLEtBQUssU0FBQXhELEdBQUssT0FBQUEsSUFBTW1HLElBQU81QyxFQUFLOUMsUUFDMUVLLEVBQU1xQixLQUFLLElBQUl4QixFQUFpQndGLEVBQU0zRyxFQUFPb0IsS0FMOUMsSUFBU3JDLEVBQUksRUFBR0EsRUFBSXFTLEVBQVk3TyxPQUFReEQsR0FBUSxJQUF2Q0EsR0FPVCxNQUFPLENBQ05tUyxVQUFTQSxFQUNUNVAsTUFBS0EsR0R1QmdCZ1EsQ0FBTVYsRUFBVTVRLE9BQzlCdVIsRUFBYSxJQUFJckMsRUFBVzhCLEVBQVkxUCxPQUFTb08sU0FBU0MsZUFBZSxRQUE2QjNQLE9BQzVHNkMsUUFBUUMsSUFBSXlPLEdBQ1pBLEVBQVdsQyxnQ0FBZ0NoSixLQUFLLFNBQUFHLEdFaERuRCxJQUFDZ0wsRUZpRE1YLEVBQVc3USxPRWpEakJ3UixFRmlEbUNoTCxFRWpERCxzQkZpRE13SyxFQUFZRSxVRWhEL0IsZUFDZE0sRUFBZ0I1TyxLQUFLdEQsS0FBSSxRQUMvQmtTLEVBQWdCL00sZUFBYyIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgY2xhc3MgU3Bhbm5pbmdUcmVlTGluayB7XHJcblx0Y29uc3RydWN0b3IocHVibGljIHRvTm9kZTogc3RyaW5nLCBwdWJsaWMgY29zdDogbnVtYmVyKSB7XHJcblx0fVxyXG59XHJcbiIsImltcG9ydCB7U3Bhbm5pbmdUcmVlTGlua30gZnJvbSBcIi4vc3Bhbm5pbmdUcmVlTGlua1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNwYW5uaW5nVHJlZU5vZGUge1xyXG5cdGNvbnN0cnVjdG9yKHB1YmxpYyBuYW1lOiBzdHJpbmcsIHB1YmxpYyB2YWx1ZTogbnVtYmVyLCBwdWJsaWMgbGlua3M6IFNwYW5uaW5nVHJlZUxpbmtbXSkge1xyXG5cdH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgU2ltdWxhdGlvbkxpbmsge1xyXG5cdGNvbnN0cnVjdG9yKHB1YmxpYyBub2Rlczoge25hbWU6IHN0cmluZywgdmFsdWU6IG51bWJlcn1bXSwgcHVibGljIGNvc3Q6IG51bWJlcil7fVxyXG59XHJcbiIsImltcG9ydCB7U2ltdWxhdGlvbkxpbmt9IGZyb20gXCIuLi9TaW11bGF0aW9uL1NpbXVsYXRpb25MaW5rXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgTWluaW1hbFNwYW5UcmVlIHtcclxuICAgIHB1YmxpYyBzaG9ydGVzdExpbmtzOiBTaW11bGF0aW9uTGlua1tdID0gW107XHJcbiAgICBwdWJsaWMgYWxsTm9kZXM6IHsgbmFtZTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyIH1bXSA9IFtdO1xyXG4gICAgcHVibGljIHJvb3Q6IHsgbmFtZTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyIH07XHJcblxyXG4gICAgYWxsTm9kZXNBcmVDb25uZWN0ZWQoYWxsTm9kZXMsIHNob3J0ZXN0TGlua3MgPSB0aGlzLnNob3J0ZXN0TGlua3MpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcclxuICAgICAgICBjb25zdCBhcnJheSA9IHNob3J0ZXN0TGlua3MuZmxhdE1hcChsID0+IGwubm9kZXMpO1xyXG4gICAgICAgIGNvbnN0IG1hcCA9IG5ldyBNYXAoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYXJyYXkpIHtcclxuICAgICAgICAgICAgaWYgKCFtYXAuaGFzKGl0ZW0ubmFtZSkpIHtcclxuICAgICAgICAgICAgICAgIG1hcC5zZXQoaXRlbS5uYW1lLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBhbGxOb2Rlc0FyZUluY2x1ZGVkID0gcmVzdWx0Lmxlbmd0aCA9PT0gYWxsTm9kZXMubGVuZ3RoO1xyXG4gICAgICAgIGxldCBhbGxOb2Rlc0FyZUNvbm5lY3RlZDtcclxuICAgICAgICBpZiAoYWxsTm9kZXNBcmVJbmNsdWRlZCkge1xyXG4gICAgICAgICAgICBsZXQgbm9kZXNUb0ZpbmQgPSBbLi4udGhpcy5hbGxOb2Rlc107XHJcbiAgICAgICAgICAgIGNvbnN0IGFsbEZvdW5kID0gKCkgPT4gbm9kZXNUb0ZpbmQubGVuZ3RoID09PSAwO1xyXG4gICAgICAgICAgICBjb25zdCBnZXREaXJlY3RDb25uZWN0ZWQgPSAobm9kZSkgPT4gc2hvcnRlc3RMaW5rc1xyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihsaW5rID0+IGxpbmsubm9kZXMuZmluZEluZGV4KG4gPT4gbi5uYW1lID09PSBub2RlLm5hbWUpICE9PSAtMSlcclxuICAgICAgICAgICAgICAgIC5mbGF0TWFwKGxpbmsgPT4gbGluay5ub2Rlcy5maW5kKG4gPT4gbi5uYW1lICE9PSBub2RlLm5hbWUpKVxyXG4gICAgICAgICAgICAgICAgLmZpbHRlcihuID0+IG5vZGVzVG9GaW5kLmZpbmRJbmRleChuMSA9PiBuMS5uYW1lID09PSBuLm5hbWUpICE9PSAtMSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZU5vZGUgPSAobm9kZSkgPT4gbm9kZXNUb0ZpbmQuc3BsaWNlKG5vZGVzVG9GaW5kLmZpbmRJbmRleChuID0+IG4ubmFtZSA9PT0gbm9kZS5uYW1lKSwgMSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyYXZlcnNlID0gKGN1cnJlbnROb2RlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVOb2RlKGN1cnJlbnROb2RlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm5lY3RlZCA9IGdldERpcmVjdENvbm5lY3RlZChjdXJyZW50Tm9kZSk7XHJcbiAgICAgICAgICAgICAgICBjb25uZWN0ZWQuZm9yRWFjaChuZXh0ID0+IHRyYXZlcnNlKG5leHQpKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdHJhdmVyc2UodGhpcy5yb290KTtcclxuICAgICAgICAgICAgYWxsTm9kZXNBcmVDb25uZWN0ZWQgPSBhbGxGb3VuZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYWxsTm9kZXNBcmVJbmNsdWRlZCAmJiBhbGxOb2Rlc0FyZUNvbm5lY3RlZDtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3BhblRyZWVMaW5rczogU2ltdWxhdGlvbkxpbmtbXSkge1xyXG5cclxuICAgICAgICBsZXQgbGlua3MgPSBbLi4uc3BhblRyZWVMaW5rc107XHJcbiAgICAgICAgbGlua3MgPSBsaW5rcy5zb3J0KChhLCBiKSA9PiBhLmNvc3QgLSBiLmNvc3QpLnJldmVyc2UoKTtcclxuXHJcbiAgICAgICAgY29uc3QgYXJyYXkgPSBsaW5rcy5mbGF0TWFwKGwgPT4gbC5ub2Rlcyk7XHJcblxyXG4gICAgICAgIGNvbnN0IG1hcCA9IG5ldyBNYXAoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYXJyYXkpIHtcclxuICAgICAgICAgICAgaWYgKCFtYXAuaGFzKGl0ZW0ubmFtZSkpIHtcclxuICAgICAgICAgICAgICAgIG1hcC5zZXQoaXRlbS5uYW1lLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWxsTm9kZXMucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJvb3QgPSB0aGlzLmFsbE5vZGVzLnNvcnQoKGEsIGIpID0+IGEudmFsdWUgLSBiLnZhbHVlKVswXTtcclxuICAgICAgICBjb25zb2xlLmxvZyhbLi4ubGlua3NdKTtcclxuICAgICAgICB3aGlsZSAoIXRoaXMuYWxsTm9kZXNBcmVDb25uZWN0ZWQodGhpcy5hbGxOb2RlcykpIHtcclxuICAgICAgICAgICAgbGV0IGl0ZW1zID0gbGlua3MucG9wKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvcnRlc3RMaW5rcy5wdXNoKGl0ZW1zKTtcclxuICAgICAgICAgICAgaWYodGhpcy5hbGxOb2Rlc0FyZUNvbm5lY3RlZCh0aGlzLmFsbE5vZGVzKSl7XHJcbiAgICAgICAgICAgICAgICBsZXQgdGVtcCwgbGFzdCA9IHRlbXAgPSBbLi4udGhpcy5zaG9ydGVzdExpbmtzXTtcclxuICAgICAgICAgICAgICAgIHdoaWxlKCEhdGVtcCl7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdCA9IHRlbXA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcCA9IHRoaXMudHJ5VG9SZW1vdmUodGVtcCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZihsYXN0Lmxlbmd0aCA8IHRoaXMuc2hvcnRlc3RMaW5rcy5sZW5ndGgpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvcnRlc3RMaW5rcyA9IGxhc3Q7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc29sZS5sb2codGhpcy5zaG9ydGVzdExpbmtzKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgdHJ5VG9SZW1vdmUoc2hvcnRlc3RMaW5rcyl7XHJcbiAgICAgICAgbGV0IHJlcztcclxuICAgICAgICBmb3IgKGNvbnN0IGwgb2Ygc2hvcnRlc3RMaW5rcykge1xyXG4gICAgICAgICAgICBsZXQgc2ltdWxhdGlvbkxpbmtzID0gWy4uLnNob3J0ZXN0TGlua3NdO1xyXG4gICAgICAgICAgICBzaW11bGF0aW9uTGlua3Muc3BsaWNlKHNpbXVsYXRpb25MaW5rcy5maW5kSW5kZXgobGluayA9PiBsaW5rID09PSBsKSwxKTtcclxuICAgICAgICAgICAgaWYodGhpcy5hbGxOb2Rlc0FyZUNvbm5lY3RlZCh0aGlzLmFsbE5vZGVzLCBzaW11bGF0aW9uTGlua3MpKXtcclxuICAgICAgICAgICAgICAgIHJlcyA9IHNpbXVsYXRpb25MaW5rcztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXM7XHJcbiAgICB9XHJcblxyXG4gICAgbGlua1RvU3RyaW5nKCkge1xyXG4gICAgICAgIGNvbnN0IHNvcnRlZCA9IHRoaXMuc2hvcnRlc3RMaW5rcy5tYXAobGluayA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2ltdWxhdGlvbkxpbmsobGluay5ub2Rlcy5zb3J0KChhLCBiKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGEubmFtZSA8IGIubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhLm5hbWUgPiBiLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICAgICAgfSksIGxpbmsuY29zdFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgaWYgKGEubm9kZXNbMF0ubmFtZSA8IGIubm9kZXNbMF0ubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhLm5vZGVzWzBdLm5hbWUgPiBiLm5vZGVzWzBdLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhLm5vZGVzWzBdLm5hbWUgPT09IGIubm9kZXNbMF0ubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGEubm9kZXNbMV0ubmFtZSA8IGIubm9kZXNbMV0ubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChhLm5vZGVzWzFdLm5hbWUgPiBiLm5vZGVzWzFdLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBsZXQgcmV0ID0gXCJcIjtcclxuICAgICAgICBzb3J0ZWQuZm9yRWFjaChsaW5rID0+IHtcclxuICAgICAgICAgICAgcmV0ICs9IGAke2xpbmsubm9kZXNbMF0ubmFtZX0gLSAke2xpbmsubm9kZXNbMV0ubmFtZX07XFxuXFx0YFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXQ7XHJcbiAgICB9XHJcblxyXG59XHJcbiIsImltcG9ydCB7U2ltdWxhdGlvbkNvbm5lY3Rpb259IGZyb20gXCIuL1NpbXVsYXRpb25Db25uZWN0aW9uXCI7XHJcbmltcG9ydCB7U2ltdWxhdGlvblBhY2thZ2V9IGZyb20gXCIuL1NpbXVsYXRpb25QYWNrYWdlXCI7XHJcbmltcG9ydCB7TWluaW1hbFNwYW5UcmVlfSBmcm9tIFwiLi4vU3Bhbm5pbmdUcmVlL21pbmltYWxTcGFubmluZ1RyZWVcIjtcclxuaW1wb3J0IHt0cnlSZXNvbHZlUGFja2FnZX0gZnJvbSBcInRzbGludC9saWIvdXRpbHNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBCcmlkZ2Uge1xyXG4gICAgcHVibGljIHJvb3RPZkluZGV4aW5nID0gZmFsc2U7XHJcbiAgICBwdWJsaWMgcmV0dXJuVG86IHN0cmluZ1tdID0gW107XHJcbiAgICAvLyBCcmlkZ2UgZGF0YVxyXG4gICAgcHVibGljIG5hbWU6IHN0cmluZztcclxuICAgIHB1YmxpYyB2YWx1ZTogbnVtYmVyO1xyXG5cclxuICAgIC8vIERhdGEgZGlzY292ZXJlZFxyXG4gICAgcHVibGljIE1TVDogTWluaW1hbFNwYW5UcmVlO1xyXG5cclxuICAgIC8vIGRhdGEgZm9yIENlbnRyYWxTcGFubmluZ1RyZWVQcm90b2NvbFxyXG4gICAgcHVibGljIElOREVYRUQ6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgRElTQ09WRVJFRF9MSU5LUzoge1xyXG4gICAgICAgIG5vZGVzOiB7IG5hbWU6IHN0cmluZywgdmFsdWU6IG51bWJlciB9W107IC8vIG15IG5hbWUgYW5kIGEgY29ubmVjdGVkIGJyaWRnZXMgbmFtZVxyXG4gICAgICAgIGNvc3Q6IG51bWJlcjsgLy8gY29zdCB0byByZWFjaCB0aGUgYnJpZGdlXHJcbiAgICB9W10gPSBbXTtcclxuXHJcbiAgICBwcml2YXRlIFdBSVRJTkdfRk9SX0JSSURHRVM6IHN0cmluZ1tdO1xyXG5cclxuICAgIC8vIHNpbXVsYXRpb24gQ29ubmVjdGlvblxyXG4gICAgcHVibGljIGNvbm5lY3Rpb246IFNpbXVsYXRpb25Db25uZWN0aW9uO1xyXG4gICAgcHJpdmF0ZSBkdW1wQ2hhbmdlczogKCkgPT4gdm9pZDtcclxuICAgIGNvbnN0cnVjdG9yKG5hbWU6IHN0cmluZywgdmFsdWU6IG51bWJlciwgY29ubmVjdGlvbjogU2ltdWxhdGlvbkNvbm5lY3Rpb24sIGR1bXBDaGFuZ2VzOiAoYikgPT4gdm9pZCkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMuY29ubmVjdGlvbiA9IGNvbm5lY3Rpb247XHJcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uLnJlY2VpdmUuc3Vic2NyaWJlKChwa2cpID0+IHRoaXMucmVjZWl2ZShwa2cpKTtcclxuICAgICAgICB0aGlzLmR1bXBDaGFuZ2VzID0gKCkgPT4gZHVtcENoYW5nZXModGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFzeW5jIGluZGV4TmV0d29yaygpIHtcclxuICAgICAgICB0aGlzLnJvb3RPZkluZGV4aW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmR1bXBDaGFuZ2VzKCk7XHJcbiAgICAgICAgbGV0IHNpYmxpbmdzID0gKGF3YWl0IHRoaXMuY29ubmVjdGlvbi5waW5nKTtcclxuICAgICAgICB0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMgPSBzaWJsaW5ncztcclxuICAgICAgICBzaWJsaW5ncy5mb3JFYWNoKHRhcmdldCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZCh7XHJcbiAgICAgICAgICAgICAgICBwcm90b2NvbDogJ0NTVFAnLFxyXG4gICAgICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdEZWFyIE5laWdoYm9yIGhlYXIgaXMgbXkgbmFtZSBhbmQgdGhlIHBhY2thZ2UgcHJvdmlkZXMgeW91IHRoZSBjb3N0IHRvIG1lLiBGb2xsb3cgdGhlIENTVFAuJyxcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiB7bmFtZTogdGhpcy5uYW1lLCB2YWx1ZTogdGhpcy52YWx1ZX1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0YXJnZXRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHB1YmxpYyBzZW5kKHBrZzogU2ltdWxhdGlvblBhY2thZ2UpIHtcclxuICAgICAgICB0aGlzLmNvbm5lY3Rpb24uc2VuZC5uZXh0KHBrZyk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGhhbmRsZUNTVFBQYWNrYWdlKHBrZzogU2ltdWxhdGlvblBhY2thZ2UpIHtcclxuICAgICAgICBpZiAodGhpcy5JTkRFWEVEIHx8IHRoaXMucm9vdE9mSW5kZXhpbmcgJiYgIHBrZy5jb250ZW50LmZyb20pXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLm5hbWUsICdyZWNlaXZlZCBwa2cnKTtcclxuICAgICAgICBpZiAodGhpcy5ESVNDT1ZFUkVEX0xJTktTLmxlbmd0aCA9PT0gMCAmJiAhdGhpcy5yb290T2ZJbmRleGluZykge1xyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24ucGluZy50aGVuKGJyaWRnZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTID0gYnJpZGdlcy5maWx0ZXIobmFtZSA9PiBuYW1lICE9PSBwa2cuY29udGVudC5mcm9tLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kdW1wQ2hhbmdlcygpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5uYW1lLCBcIiB3YWl0aW5nIGZvcjpcIiwgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuV0FJVElOR19GT1JfQlJJREdFUy5mb3JFYWNoKHRhcmdldCA9PiB0aGlzLnNlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3RvY29sOiAnQ1NUUCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRGVhciBOZWlnaGJvciBoZWFyIGlzIG15IG5hbWUgYW5kIHRoZSBwYWNrYWdlIHByb3ZpZGVzIHlvdSB0aGUgY29zdCB0byBtZS4gRm9sbG93IHRoZSBDU1RQLicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb206IHtuYW1lOiB0aGlzLm5hbWUsIHZhbHVlOiB0aGlzLnZhbHVlfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldHVyblRvID0gdGhpcy5ESVNDT1ZFUkVEX0xJTktTWzBdLm5vZGVzLmZpbmQobiA9PiBuLm5hbWUgIT09IHRoaXMubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kdW1wQ2hhbmdlcygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm90b2NvbDogJ0NTVFAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRGVhciBOZWlnaGJvciBoZWFyIGFyZSBteSBkaXNjb3ZlcmVkIGxpbmtzLCB5b3UgbWF5IGNvbmNhdCB0aGVtIHdpdGggeW91cnMgYW5kIHNlbmQgdGhlbSBiYWNrIScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNjb3ZlcmVkTGlua3M6IHRoaXMuRElTQ09WRVJFRF9MSU5LU1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHJldHVyblRvLm5hbWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLklOREVYRUQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5yb290T2ZJbmRleGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3Rpb24uZmluaXNoZWRJbmRleGluZy5uZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbXN0ID0gbmV3IE1pbmltYWxTcGFuVHJlZSh0aGlzLkRJU0NPVkVSRURfTElOS1MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLk1TVCA9IG1zdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLmZpbmlzaGVkSW5kZXhpbmcubmV4dChtc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmR1bXBDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLkRJU0NPVkVSRURfTElOS1MucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBjb3N0OiBwa2cuY29zdCxcclxuICAgICAgICAgICAgICAgIG5vZGVzOiBbe25hbWU6IHRoaXMubmFtZSwgdmFsdWU6IHRoaXMudmFsdWV9LCBwa2cuY29udGVudC5mcm9tXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5yZXR1cm5Uby5wdXNoKHBrZy5jb250ZW50LmZyb20ubmFtZSk7XHJcbiAgICAgICAgICAgIHRoaXMuZHVtcENoYW5nZXMoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicmV0dXJuaW5nIGZyb20gXCIsIHRoaXMubmFtZSwgXCJ0byBcIiwgdGhpcy5yZXR1cm5Ubyk7XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTICYmICEhcGtnLmNvbnRlbnQuZGlzY292ZXJlZExpbmtzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBwa2cuY29udGVudC5kaXNjb3ZlcmVkTGlua3NbMF0ubm9kZXMuZmluZChuID0+IG4ubmFtZSAhPT0gdGhpcy5uYW1lKTtcclxuICAgICAgICAgICAgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTLnNwbGljZSh0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMuZmluZEluZGV4KG4gPT4gbiA9PT0gbmFtZSksIDEpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLm5hbWUsIFwiIHdhaXRpbmcgZm9yOlwiLCB0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMpO1xyXG4gICAgICAgICAgICB0aGlzLkRJU0NPVkVSRURfTElOS1MucHVzaCguLi5wa2cuY29udGVudC5kaXNjb3ZlcmVkTGlua3MpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTICYmIHBrZy5jb250ZW50LmZyb20pIHtcclxuICAgICAgICAgICAgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTLnNwbGljZSh0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMuZmluZEluZGV4KG4gPT4gbiA9PT0gcGtnLmNvbnRlbnQuZnJvbS5uYW1lKSwgMSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMubmFtZSwgXCIgd2FpdGluZyBmb3I6XCIsIHRoaXMuV0FJVElOR19GT1JfQlJJREdFUyk7XHJcbiAgICAgICAgICAgIHRoaXMucmV0dXJuVG8ucHVzaChwa2cuY29udGVudC5mcm9tLm5hbWUpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInJldHVybmluZyBmcm9tIFwiLCB0aGlzLm5hbWUsIFwidG8gXCIsIHRoaXMucmV0dXJuVG8pO1xyXG4gICAgICAgICAgICB0aGlzLkRJU0NPVkVSRURfTElOS1MucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBjb3N0OiBwa2cuY29zdCxcclxuICAgICAgICAgICAgICAgIG5vZGVzOiBbe25hbWU6IHRoaXMubmFtZSwgdmFsdWU6IHRoaXMudmFsdWV9LCBwa2cuY29udGVudC5mcm9tXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kdW1wQ2hhbmdlcygpO1xyXG5cclxuICAgICAgICBpZiAoISF0aGlzLldBSVRJTkdfRk9SX0JSSURHRVMgJiYgdGhpcy5XQUlUSU5HX0ZPUl9CUklER0VTLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLm5hbWUsICdzZW5kaW5nJywgdGhpcy5ESVNDT1ZFUkVEX0xJTktTKTtcclxuICAgICAgICAgICAgdGhpcy5yZXR1cm5Uby5mb3JFYWNoKHRhcmdldCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3RvY29sOiAnQ1NUUCcsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRGVhciBOZWlnaGJvciBoZWFyIGFyZSBteSBkaXNjb3ZlcmVkIGxpbmtzLCB5b3UgbWF5IGNvbmNhdCB0aGVtIHdpdGggeW91cnMgYW5kIHNlbmQgdGhlbSBiYWNrIScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2NvdmVyZWRMaW5rczogdGhpcy5ESVNDT1ZFUkVEX0xJTktTXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5JTkRFWEVEID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ05vZGUgaGFzIGZpbmlzaGVkICcsIHRoaXMubmFtZSk7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5yb290T2ZJbmRleGluZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLmZpbmlzaGVkSW5kZXhpbmcubmV4dCgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGlua3MgPSBbXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuRElTQ09WRVJFRF9MSU5LUy5mb3JFYWNoKGwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbGlua3MuZmluZChsaW5rID0+IGwubm9kZXMuZmluZEluZGV4KG4gPT4gbi5uYW1lID09PSBsaW5rLm5vZGVzWzBdLm5hbWUpICE9PSAtMSAmJiBsLm5vZGVzLmZpbmRJbmRleChuID0+IG4ubmFtZSA9PT0gbGluay5ub2Rlc1sxXS5uYW1lKSAhPT0gLTEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtzLnB1c2gobCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZGwnLCB0aGlzLkRJU0NPVkVSRURfTElOS1MubWFwKGwgPT4gbC5ub2RlcykpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2wnLCBsaW5rcyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtc3QgPSBuZXcgTWluaW1hbFNwYW5UcmVlKGxpbmtzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuTVNUID0gbXN0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0aW9uLmZpbmlzaGVkSW5kZXhpbmcubmV4dChtc3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZHVtcENoYW5nZXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlY2VpdmUocGtnOiBTaW11bGF0aW9uUGFja2FnZSkge1xyXG4gICAgICAgIGlmIChwa2cucHJvdG9jb2wgPT09ICdDU1RQJykge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZUNTVFBQYWNrYWdlKHBrZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cclxuTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlXHJcbnRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlXHJcbkxpY2Vuc2UgYXQgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcblxyXG5USElTIENPREUgSVMgUFJPVklERUQgT04gQU4gKkFTIElTKiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZXHJcbktJTkQsIEVJVEhFUiBFWFBSRVNTIE9SIElNUExJRUQsIElOQ0xVRElORyBXSVRIT1VUIExJTUlUQVRJT04gQU5ZIElNUExJRURcclxuV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIFRJVExFLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSxcclxuTUVSQ0hBTlRBQkxJVFkgT1IgTk9OLUlORlJJTkdFTUVOVC5cclxuXHJcblNlZSB0aGUgQXBhY2hlIFZlcnNpb24gMi4wIExpY2Vuc2UgZm9yIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9uc1xyXG5hbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fYXNzaWduID0gZnVuY3Rpb24oKSB7XHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gX19hc3NpZ24odCkge1xyXG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICBzID0gYXJndW1lbnRzW2ldO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkpIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZXN0KHMsIGUpIHtcclxuICAgIHZhciB0ID0ge307XHJcbiAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICB0W3BdID0gc1twXTtcclxuICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMClcclxuICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZShyZXN1bHQudmFsdWUpOyB9KS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKHIpIHsgci52YWx1ZSBpbnN0YW5jZW9mIF9fYXdhaXQgPyBQcm9taXNlLnJlc29sdmUoci52YWx1ZS52KS50aGVuKGZ1bGZpbGwsIHJlamVjdCkgOiBzZXR0bGUocVswXVsyXSwgcik7IH1cclxuICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHJlamVjdCh2YWx1ZSkgeyByZXN1bWUoXCJ0aHJvd1wiLCB2YWx1ZSk7IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNEZWxlZ2F0b3Iobykge1xyXG4gICAgdmFyIGksIHA7XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuLCBmKSB7IGlbbl0gPSBvW25dID8gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIChwID0gIXApID8geyB2YWx1ZTogX19hd2FpdChvW25dKHYpKSwgZG9uZTogbiA9PT0gXCJyZXR1cm5cIiB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKE9iamVjdC5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIHJlc3VsdFtrXSA9IG1vZFtrXTtcclxuICAgIHJlc3VsdC5kZWZhdWx0ID0gbW9kO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRnVuY3Rpb24oeCkge1xuICAgIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzRnVuY3Rpb24uanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG52YXIgX2VuYWJsZV9zdXBlcl9ncm9zc19tb2RlX3RoYXRfd2lsbF9jYXVzZV9iYWRfdGhpbmdzID0gZmFsc2U7XG5leHBvcnQgdmFyIGNvbmZpZyA9IHtcbiAgICBQcm9taXNlOiB1bmRlZmluZWQsXG4gICAgc2V0IHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3IgPSAvKkBfX1BVUkVfXyovIG5ldyBFcnJvcigpO1xuICAgICAgICAgICAgLypAX19QVVJFX18qLyBjb25zb2xlLndhcm4oJ0RFUFJFQ0FURUQhIFJ4SlMgd2FzIHNldCB0byB1c2UgZGVwcmVjYXRlZCBzeW5jaHJvbm91cyBlcnJvciBoYW5kbGluZyBiZWhhdmlvciBieSBjb2RlIGF0OiBcXG4nICsgZXJyb3Iuc3RhY2spO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKF9lbmFibGVfc3VwZXJfZ3Jvc3NfbW9kZV90aGF0X3dpbGxfY2F1c2VfYmFkX3RoaW5ncykge1xuICAgICAgICAgICAgLypAX19QVVJFX18qLyBjb25zb2xlLmxvZygnUnhKUzogQmFjayB0byBhIGJldHRlciBlcnJvciBiZWhhdmlvci4gVGhhbmsgeW91LiA8MycpO1xuICAgICAgICB9XG4gICAgICAgIF9lbmFibGVfc3VwZXJfZ3Jvc3NfbW9kZV90aGF0X3dpbGxfY2F1c2VfYmFkX3RoaW5ncyA9IHZhbHVlO1xuICAgIH0sXG4gICAgZ2V0IHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcoKSB7XG4gICAgICAgIHJldHVybiBfZW5hYmxlX3N1cGVyX2dyb3NzX21vZGVfdGhhdF93aWxsX2NhdXNlX2JhZF90aGluZ3M7XG4gICAgfSxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jb25maWcuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5leHBvcnQgZnVuY3Rpb24gaG9zdFJlcG9ydEVycm9yKGVycikge1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgeyB0aHJvdyBlcnI7IH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aG9zdFJlcG9ydEVycm9yLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfY29uZmlnLF91dGlsX2hvc3RSZXBvcnRFcnJvciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBjb25maWcgfSBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgeyBob3N0UmVwb3J0RXJyb3IgfSBmcm9tICcuL3V0aWwvaG9zdFJlcG9ydEVycm9yJztcbmV4cG9ydCB2YXIgZW1wdHkgPSB7XG4gICAgY2xvc2VkOiB0cnVlLFxuICAgIG5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkgeyB9LFxuICAgIGVycm9yOiBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaG9zdFJlcG9ydEVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7IH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1PYnNlcnZlci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCB2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4ICYmIHR5cGVvZiB4Lmxlbmd0aCA9PT0gJ251bWJlcic7IH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aXNBcnJheS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmZ1bmN0aW9uIFVuc3Vic2NyaXB0aW9uRXJyb3JJbXBsKGVycm9ycykge1xuICAgIEVycm9yLmNhbGwodGhpcyk7XG4gICAgdGhpcy5tZXNzYWdlID0gZXJyb3JzID9cbiAgICAgICAgZXJyb3JzLmxlbmd0aCArIFwiIGVycm9ycyBvY2N1cnJlZCBkdXJpbmcgdW5zdWJzY3JpcHRpb246XFxuXCIgKyBlcnJvcnMubWFwKGZ1bmN0aW9uIChlcnIsIGkpIHsgcmV0dXJuIGkgKyAxICsgXCIpIFwiICsgZXJyLnRvU3RyaW5nKCk7IH0pLmpvaW4oJ1xcbiAgJykgOiAnJztcbiAgICB0aGlzLm5hbWUgPSAnVW5zdWJzY3JpcHRpb25FcnJvcic7XG4gICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XG4gICAgcmV0dXJuIHRoaXM7XG59XG5VbnN1YnNjcmlwdGlvbkVycm9ySW1wbC5wcm90b3R5cGUgPSAvKkBfX1BVUkVfXyovIE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcbmV4cG9ydCB2YXIgVW5zdWJzY3JpcHRpb25FcnJvciA9IFVuc3Vic2NyaXB0aW9uRXJyb3JJbXBsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9VW5zdWJzY3JpcHRpb25FcnJvci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgX3V0aWxfaXNBcnJheSxfdXRpbF9pc09iamVjdCxfdXRpbF9pc0Z1bmN0aW9uLF91dGlsX1Vuc3Vic2NyaXB0aW9uRXJyb3IgUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0IHsgaXNBcnJheSB9IGZyb20gJy4vdXRpbC9pc0FycmF5JztcbmltcG9ydCB7IGlzT2JqZWN0IH0gZnJvbSAnLi91dGlsL2lzT2JqZWN0JztcbmltcG9ydCB7IGlzRnVuY3Rpb24gfSBmcm9tICcuL3V0aWwvaXNGdW5jdGlvbic7XG5pbXBvcnQgeyBVbnN1YnNjcmlwdGlvbkVycm9yIH0gZnJvbSAnLi91dGlsL1Vuc3Vic2NyaXB0aW9uRXJyb3InO1xudmFyIFN1YnNjcmlwdGlvbiA9IC8qQF9fUFVSRV9fKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBTdWJzY3JpcHRpb24odW5zdWJzY3JpYmUpIHtcbiAgICAgICAgdGhpcy5jbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcGFyZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcGFyZW50cyA9IG51bGw7XG4gICAgICAgIHRoaXMuX3N1YnNjcmlwdGlvbnMgPSBudWxsO1xuICAgICAgICBpZiAodW5zdWJzY3JpYmUpIHtcbiAgICAgICAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlID0gdW5zdWJzY3JpYmU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS51bnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGhhc0Vycm9ycyA9IGZhbHNlO1xuICAgICAgICB2YXIgZXJyb3JzO1xuICAgICAgICBpZiAodGhpcy5jbG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgX2EgPSB0aGlzLCBfcGFyZW50ID0gX2EuX3BhcmVudCwgX3BhcmVudHMgPSBfYS5fcGFyZW50cywgX3Vuc3Vic2NyaWJlID0gX2EuX3Vuc3Vic2NyaWJlLCBfc3Vic2NyaXB0aW9ucyA9IF9hLl9zdWJzY3JpcHRpb25zO1xuICAgICAgICB0aGlzLmNsb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuX3BhcmVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3BhcmVudHMgPSBudWxsO1xuICAgICAgICB0aGlzLl9zdWJzY3JpcHRpb25zID0gbnVsbDtcbiAgICAgICAgdmFyIGluZGV4ID0gLTE7XG4gICAgICAgIHZhciBsZW4gPSBfcGFyZW50cyA/IF9wYXJlbnRzLmxlbmd0aCA6IDA7XG4gICAgICAgIHdoaWxlIChfcGFyZW50KSB7XG4gICAgICAgICAgICBfcGFyZW50LnJlbW92ZSh0aGlzKTtcbiAgICAgICAgICAgIF9wYXJlbnQgPSArK2luZGV4IDwgbGVuICYmIF9wYXJlbnRzW2luZGV4XSB8fCBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKF91bnN1YnNjcmliZSkpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgX3Vuc3Vic2NyaWJlLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGhhc0Vycm9ycyA9IHRydWU7XG4gICAgICAgICAgICAgICAgZXJyb3JzID0gZSBpbnN0YW5jZW9mIFVuc3Vic2NyaXB0aW9uRXJyb3IgPyBmbGF0dGVuVW5zdWJzY3JpcHRpb25FcnJvcnMoZS5lcnJvcnMpIDogW2VdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpc0FycmF5KF9zdWJzY3JpcHRpb25zKSkge1xuICAgICAgICAgICAgaW5kZXggPSAtMTtcbiAgICAgICAgICAgIGxlbiA9IF9zdWJzY3JpcHRpb25zLmxlbmd0aDtcbiAgICAgICAgICAgIHdoaWxlICgrK2luZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN1YiA9IF9zdWJzY3JpcHRpb25zW2luZGV4XTtcbiAgICAgICAgICAgICAgICBpZiAoaXNPYmplY3Qoc3ViKSkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ViLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhc0Vycm9ycyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMgPSBlcnJvcnMgfHwgW107XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIFVuc3Vic2NyaXB0aW9uRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcnMgPSBlcnJvcnMuY29uY2F0KGZsYXR0ZW5VbnN1YnNjcmlwdGlvbkVycm9ycyhlLmVycm9ycykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JzLnB1c2goZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhc0Vycm9ycykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFVuc3Vic2NyaXB0aW9uRXJyb3IoZXJyb3JzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAodGVhcmRvd24pIHtcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IHRlYXJkb3duO1xuICAgICAgICBzd2l0Y2ggKHR5cGVvZiB0ZWFyZG93bikge1xuICAgICAgICAgICAgY2FzZSAnZnVuY3Rpb24nOlxuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24odGVhcmRvd24pO1xuICAgICAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uID09PSB0aGlzIHx8IHN1YnNjcmlwdGlvbi5jbG9zZWQgfHwgdHlwZW9mIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIShzdWJzY3JpcHRpb24gaW5zdGFuY2VvZiBTdWJzY3JpcHRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSBzdWJzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLl9zdWJzY3JpcHRpb25zID0gW3RtcF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgICAgIGlmICghdGVhcmRvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN1YnNjcmlwdGlvbi5FTVBUWTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bnJlY29nbml6ZWQgdGVhcmRvd24gJyArIHRlYXJkb3duICsgJyBhZGRlZCB0byBTdWJzY3JpcHRpb24uJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1YnNjcmlwdGlvbi5fYWRkUGFyZW50KHRoaXMpKSB7XG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9ucyA9IHRoaXMuX3N1YnNjcmlwdGlvbnM7XG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbnMucHVzaChzdWJzY3JpcHRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc3Vic2NyaXB0aW9ucyA9IFtzdWJzY3JpcHRpb25dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdWJzY3JpcHRpb247XG4gICAgfTtcbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHtcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbnMgPSB0aGlzLl9zdWJzY3JpcHRpb25zO1xuICAgICAgICBpZiAoc3Vic2NyaXB0aW9ucykge1xuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbkluZGV4ID0gc3Vic2NyaXB0aW9ucy5pbmRleE9mKHN1YnNjcmlwdGlvbik7XG4gICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9ucy5zcGxpY2Uoc3Vic2NyaXB0aW9uSW5kZXgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJzY3JpcHRpb24ucHJvdG90eXBlLl9hZGRQYXJlbnQgPSBmdW5jdGlvbiAocGFyZW50KSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMsIF9wYXJlbnQgPSBfYS5fcGFyZW50LCBfcGFyZW50cyA9IF9hLl9wYXJlbnRzO1xuICAgICAgICBpZiAoX3BhcmVudCA9PT0gcGFyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIV9wYXJlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuX3BhcmVudCA9IHBhcmVudDtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFfcGFyZW50cykge1xuICAgICAgICAgICAgdGhpcy5fcGFyZW50cyA9IFtwYXJlbnRdO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoX3BhcmVudHMuaW5kZXhPZihwYXJlbnQpID09PSAtMSkge1xuICAgICAgICAgICAgX3BhcmVudHMucHVzaChwYXJlbnQpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgU3Vic2NyaXB0aW9uLkVNUFRZID0gKGZ1bmN0aW9uIChlbXB0eSkge1xuICAgICAgICBlbXB0eS5jbG9zZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gZW1wdHk7XG4gICAgfShuZXcgU3Vic2NyaXB0aW9uKCkpKTtcbiAgICByZXR1cm4gU3Vic2NyaXB0aW9uO1xufSgpKTtcbmV4cG9ydCB7IFN1YnNjcmlwdGlvbiB9O1xuZnVuY3Rpb24gZmxhdHRlblVuc3Vic2NyaXB0aW9uRXJyb3JzKGVycm9ycykge1xuICAgIHJldHVybiBlcnJvcnMucmVkdWNlKGZ1bmN0aW9uIChlcnJzLCBlcnIpIHsgcmV0dXJuIGVycnMuY29uY2F0KChlcnIgaW5zdGFuY2VvZiBVbnN1YnNjcmlwdGlvbkVycm9yKSA/IGVyci5lcnJvcnMgOiBlcnIpOyB9LCBbXSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdWJzY3JpcHRpb24uanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5leHBvcnQgZnVuY3Rpb24gaXNPYmplY3QoeCkge1xuICAgIHJldHVybiB4ICE9PSBudWxsICYmIHR5cGVvZiB4ID09PSAnb2JqZWN0Jztcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzT2JqZWN0LmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZXhwb3J0IHZhciByeFN1YnNjcmliZXIgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nXG4gICAgPyAvKkBfX1BVUkVfXyovIFN5bWJvbCgncnhTdWJzY3JpYmVyJylcbiAgICA6ICdAQHJ4U3Vic2NyaWJlcl8nICsgLypAX19QVVJFX18qLyBNYXRoLnJhbmRvbSgpO1xuZXhwb3J0IHZhciAkJHJ4U3Vic2NyaWJlciA9IHJ4U3Vic2NyaWJlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXJ4U3Vic2NyaWJlci5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgdHNsaWIsX3V0aWxfaXNGdW5jdGlvbixfT2JzZXJ2ZXIsX1N1YnNjcmlwdGlvbixfaW50ZXJuYWxfc3ltYm9sX3J4U3Vic2NyaWJlcixfY29uZmlnLF91dGlsX2hvc3RSZXBvcnRFcnJvciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgKiBhcyB0c2xpYl8xIGZyb20gXCJ0c2xpYlwiO1xuaW1wb3J0IHsgaXNGdW5jdGlvbiB9IGZyb20gJy4vdXRpbC9pc0Z1bmN0aW9uJztcbmltcG9ydCB7IGVtcHR5IGFzIGVtcHR5T2JzZXJ2ZXIgfSBmcm9tICcuL09ic2VydmVyJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJy4vU3Vic2NyaXB0aW9uJztcbmltcG9ydCB7IHJ4U3Vic2NyaWJlciBhcyByeFN1YnNjcmliZXJTeW1ib2wgfSBmcm9tICcuLi9pbnRlcm5hbC9zeW1ib2wvcnhTdWJzY3JpYmVyJztcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJy4vY29uZmlnJztcbmltcG9ydCB7IGhvc3RSZXBvcnRFcnJvciB9IGZyb20gJy4vdXRpbC9ob3N0UmVwb3J0RXJyb3InO1xudmFyIFN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoU3Vic2NyaWJlciwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdWJzY3JpYmVyKGRlc3RpbmF0aW9uT3JOZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuc3luY0Vycm9yVmFsdWUgPSBudWxsO1xuICAgICAgICBfdGhpcy5zeW5jRXJyb3JUaHJvd24gPSBmYWxzZTtcbiAgICAgICAgX3RoaXMuc3luY0Vycm9yVGhyb3dhYmxlID0gZmFsc2U7XG4gICAgICAgIF90aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IGVtcHR5T2JzZXJ2ZXI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgaWYgKCFkZXN0aW5hdGlvbk9yTmV4dCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IGVtcHR5T2JzZXJ2ZXI7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRlc3RpbmF0aW9uT3JOZXh0ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVzdGluYXRpb25Pck5leHQgaW5zdGFuY2VvZiBTdWJzY3JpYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zeW5jRXJyb3JUaHJvd2FibGUgPSBkZXN0aW5hdGlvbk9yTmV4dC5zeW5jRXJyb3JUaHJvd2FibGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uT3JOZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb25Pck5leHQuYWRkKF90aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnN5bmNFcnJvclRocm93YWJsZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IG5ldyBTYWZlU3Vic2NyaWJlcihfdGhpcywgZGVzdGluYXRpb25Pck5leHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgX3RoaXMuc3luY0Vycm9yVGhyb3dhYmxlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBfdGhpcy5kZXN0aW5hdGlvbiA9IG5ldyBTYWZlU3Vic2NyaWJlcihfdGhpcywgZGVzdGluYXRpb25Pck5leHQsIGVycm9yLCBjb21wbGV0ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZVtyeFN1YnNjcmliZXJTeW1ib2xdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfTtcbiAgICBTdWJzY3JpYmVyLmNyZWF0ZSA9IGZ1bmN0aW9uIChuZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgdmFyIHN1YnNjcmliZXIgPSBuZXcgU3Vic2NyaWJlcihuZXh0LCBlcnJvciwgY29tcGxldGUpO1xuICAgICAgICBzdWJzY3JpYmVyLnN5bmNFcnJvclRocm93YWJsZSA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gc3Vic2NyaWJlcjtcbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdGhpcy5fbmV4dCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5fY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS51bnN1YnNjcmliZS5jYWxsKHRoaXMpO1xuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuX25leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICB9O1xuICAgIFN1YnNjcmliZXIucHJvdG90eXBlLl9lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgfTtcbiAgICBTdWJzY3JpYmVyLnByb3RvdHlwZS5fY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuZGVzdGluYXRpb24uY29tcGxldGUoKTtcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgIH07XG4gICAgU3Vic2NyaWJlci5wcm90b3R5cGUuX3Vuc3Vic2NyaWJlQW5kUmVjeWNsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcywgX3BhcmVudCA9IF9hLl9wYXJlbnQsIF9wYXJlbnRzID0gX2EuX3BhcmVudHM7XG4gICAgICAgIHRoaXMuX3BhcmVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3BhcmVudHMgPSBudWxsO1xuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgIHRoaXMuY2xvc2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3BhcmVudCA9IF9wYXJlbnQ7XG4gICAgICAgIHRoaXMuX3BhcmVudHMgPSBfcGFyZW50cztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgICByZXR1cm4gU3Vic2NyaWJlcjtcbn0oU3Vic2NyaXB0aW9uKSk7XG5leHBvcnQgeyBTdWJzY3JpYmVyIH07XG52YXIgU2FmZVN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoU2FmZVN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU2FmZVN1YnNjcmliZXIoX3BhcmVudFN1YnNjcmliZXIsIG9ic2VydmVyT3JOZXh0LCBlcnJvciwgY29tcGxldGUpIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcykgfHwgdGhpcztcbiAgICAgICAgX3RoaXMuX3BhcmVudFN1YnNjcmliZXIgPSBfcGFyZW50U3Vic2NyaWJlcjtcbiAgICAgICAgdmFyIG5leHQ7XG4gICAgICAgIHZhciBjb250ZXh0ID0gX3RoaXM7XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKG9ic2VydmVyT3JOZXh0KSkge1xuICAgICAgICAgICAgbmV4dCA9IG9ic2VydmVyT3JOZXh0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9ic2VydmVyT3JOZXh0KSB7XG4gICAgICAgICAgICBuZXh0ID0gb2JzZXJ2ZXJPck5leHQubmV4dDtcbiAgICAgICAgICAgIGVycm9yID0gb2JzZXJ2ZXJPck5leHQuZXJyb3I7XG4gICAgICAgICAgICBjb21wbGV0ZSA9IG9ic2VydmVyT3JOZXh0LmNvbXBsZXRlO1xuICAgICAgICAgICAgaWYgKG9ic2VydmVyT3JOZXh0ICE9PSBlbXB0eU9ic2VydmVyKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dCA9IE9iamVjdC5jcmVhdGUob2JzZXJ2ZXJPck5leHQpO1xuICAgICAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRleHQudW5zdWJzY3JpYmUpKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmFkZChjb250ZXh0LnVuc3Vic2NyaWJlLmJpbmQoY29udGV4dCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250ZXh0LnVuc3Vic2NyaWJlID0gX3RoaXMudW5zdWJzY3JpYmUuYmluZChfdGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMuX2NvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICBfdGhpcy5fbmV4dCA9IG5leHQ7XG4gICAgICAgIF90aGlzLl9lcnJvciA9IGVycm9yO1xuICAgICAgICBfdGhpcy5fY29tcGxldGUgPSBjb21wbGV0ZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkICYmIHRoaXMuX25leHQpIHtcbiAgICAgICAgICAgIHZhciBfcGFyZW50U3Vic2NyaWJlciA9IHRoaXMuX3BhcmVudFN1YnNjcmliZXI7XG4gICAgICAgICAgICBpZiAoIWNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nIHx8ICFfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9fdHJ5T3JVbnN1Yih0aGlzLl9uZXh0LCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLl9fdHJ5T3JTZXRFcnJvcihfcGFyZW50U3Vic2NyaWJlciwgdGhpcy5fbmV4dCwgdmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBTYWZlU3Vic2NyaWJlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHZhciBfcGFyZW50U3Vic2NyaWJlciA9IHRoaXMuX3BhcmVudFN1YnNjcmliZXI7XG4gICAgICAgICAgICB2YXIgdXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZyA9IGNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2Vycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nIHx8ICFfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yVW5zdWIodGhpcy5fZXJyb3IsIGVycik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX190cnlPclNldEVycm9yKF9wYXJlbnRTdWJzY3JpYmVyLCB0aGlzLl9lcnJvciwgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBob3N0UmVwb3J0RXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh1c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIF9wYXJlbnRTdWJzY3JpYmVyLnN5bmNFcnJvclZhbHVlID0gZXJyO1xuICAgICAgICAgICAgICAgICAgICBfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaG9zdFJlcG9ydEVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB2YXIgX3BhcmVudFN1YnNjcmliZXIgPSB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHdyYXBwZWRDb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLl9jb21wbGV0ZS5jYWxsKF90aGlzLl9jb250ZXh0KTsgfTtcbiAgICAgICAgICAgICAgICBpZiAoIWNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nIHx8ICFfcGFyZW50U3Vic2NyaWJlci5zeW5jRXJyb3JUaHJvd2FibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yVW5zdWIod3JhcHBlZENvbXBsZXRlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX3RyeU9yU2V0RXJyb3IoX3BhcmVudFN1YnNjcmliZXIsIHdyYXBwZWRDb21wbGV0ZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5fX3RyeU9yVW5zdWIgPSBmdW5jdGlvbiAoZm4sIHZhbHVlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmbi5jYWxsKHRoaXMuX2NvbnRleHQsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICBpZiAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBob3N0UmVwb3J0RXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU2FmZVN1YnNjcmliZXIucHJvdG90eXBlLl9fdHJ5T3JTZXRFcnJvciA9IGZ1bmN0aW9uIChwYXJlbnQsIGZuLCB2YWx1ZSkge1xuICAgICAgICBpZiAoIWNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2JhZCBjYWxsJyk7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZuLmNhbGwodGhpcy5fY29udGV4dCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgICAgIHBhcmVudC5zeW5jRXJyb3JWYWx1ZSA9IGVycjtcbiAgICAgICAgICAgICAgICBwYXJlbnQuc3luY0Vycm9yVGhyb3duID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGhvc3RSZXBvcnRFcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuICAgIFNhZmVTdWJzY3JpYmVyLnByb3RvdHlwZS5fdW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfcGFyZW50U3Vic2NyaWJlciA9IHRoaXMuX3BhcmVudFN1YnNjcmliZXI7XG4gICAgICAgIHRoaXMuX2NvbnRleHQgPSBudWxsO1xuICAgICAgICB0aGlzLl9wYXJlbnRTdWJzY3JpYmVyID0gbnVsbDtcbiAgICAgICAgX3BhcmVudFN1YnNjcmliZXIudW5zdWJzY3JpYmUoKTtcbiAgICB9O1xuICAgIHJldHVybiBTYWZlU3Vic2NyaWJlcjtcbn0oU3Vic2NyaWJlcikpO1xuZXhwb3J0IHsgU2FmZVN1YnNjcmliZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVN1YnNjcmliZXIuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUICBQVVJFX0lNUE9SVFNfRU5EICovXG5leHBvcnQgdmFyIG9ic2VydmFibGUgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5vYnNlcnZhYmxlIHx8ICdAQG9ic2VydmFibGUnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b2JzZXJ2YWJsZS5qcy5tYXBcbiIsIi8qKiBQVVJFX0lNUE9SVFNfU1RBUlQgIFBVUkVfSU1QT1JUU19FTkQgKi9cbmV4cG9ydCBmdW5jdGlvbiBub29wKCkgeyB9XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ub29wLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfbm9vcCBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBub29wIH0gZnJvbSAnLi9ub29wJztcbmV4cG9ydCBmdW5jdGlvbiBwaXBlKCkge1xuICAgIHZhciBmbnMgPSBbXTtcbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xuICAgICAgICBmbnNbX2ldID0gYXJndW1lbnRzW19pXTtcbiAgICB9XG4gICAgcmV0dXJuIHBpcGVGcm9tQXJyYXkoZm5zKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBwaXBlRnJvbUFycmF5KGZucykge1xuICAgIGlmICghZm5zKSB7XG4gICAgICAgIHJldHVybiBub29wO1xuICAgIH1cbiAgICBpZiAoZm5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gZm5zWzBdO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gcGlwZWQoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGZucy5yZWR1Y2UoZnVuY3Rpb24gKHByZXYsIGZuKSB7IHJldHVybiBmbihwcmV2KTsgfSwgaW5wdXQpO1xuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1waXBlLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCBfdXRpbF9jYW5SZXBvcnRFcnJvcixfdXRpbF90b1N1YnNjcmliZXIsX2ludGVybmFsX3N5bWJvbF9vYnNlcnZhYmxlLF91dGlsX3BpcGUsX2NvbmZpZyBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBjYW5SZXBvcnRFcnJvciB9IGZyb20gJy4vdXRpbC9jYW5SZXBvcnRFcnJvcic7XG5pbXBvcnQgeyB0b1N1YnNjcmliZXIgfSBmcm9tICcuL3V0aWwvdG9TdWJzY3JpYmVyJztcbmltcG9ydCB7IG9ic2VydmFibGUgYXMgU3ltYm9sX29ic2VydmFibGUgfSBmcm9tICcuLi9pbnRlcm5hbC9zeW1ib2wvb2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBwaXBlRnJvbUFycmF5IH0gZnJvbSAnLi91dGlsL3BpcGUnO1xuaW1wb3J0IHsgY29uZmlnIH0gZnJvbSAnLi9jb25maWcnO1xudmFyIE9ic2VydmFibGUgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gT2JzZXJ2YWJsZShzdWJzY3JpYmUpIHtcbiAgICAgICAgdGhpcy5faXNTY2FsYXIgPSBmYWxzZTtcbiAgICAgICAgaWYgKHN1YnNjcmliZSkge1xuICAgICAgICAgICAgdGhpcy5fc3Vic2NyaWJlID0gc3Vic2NyaWJlO1xuICAgICAgICB9XG4gICAgfVxuICAgIE9ic2VydmFibGUucHJvdG90eXBlLmxpZnQgPSBmdW5jdGlvbiAob3BlcmF0b3IpIHtcbiAgICAgICAgdmFyIG9ic2VydmFibGUgPSBuZXcgT2JzZXJ2YWJsZSgpO1xuICAgICAgICBvYnNlcnZhYmxlLnNvdXJjZSA9IHRoaXM7XG4gICAgICAgIG9ic2VydmFibGUub3BlcmF0b3IgPSBvcGVyYXRvcjtcbiAgICAgICAgcmV0dXJuIG9ic2VydmFibGU7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmUgPSBmdW5jdGlvbiAob2JzZXJ2ZXJPck5leHQsIGVycm9yLCBjb21wbGV0ZSkge1xuICAgICAgICB2YXIgb3BlcmF0b3IgPSB0aGlzLm9wZXJhdG9yO1xuICAgICAgICB2YXIgc2luayA9IHRvU3Vic2NyaWJlcihvYnNlcnZlck9yTmV4dCwgZXJyb3IsIGNvbXBsZXRlKTtcbiAgICAgICAgaWYgKG9wZXJhdG9yKSB7XG4gICAgICAgICAgICBzaW5rLmFkZChvcGVyYXRvci5jYWxsKHNpbmssIHRoaXMuc291cmNlKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzaW5rLmFkZCh0aGlzLnNvdXJjZSB8fCAoY29uZmlnLnVzZURlcHJlY2F0ZWRTeW5jaHJvbm91c0Vycm9ySGFuZGxpbmcgJiYgIXNpbmsuc3luY0Vycm9yVGhyb3dhYmxlKSA/XG4gICAgICAgICAgICAgICAgdGhpcy5fc3Vic2NyaWJlKHNpbmspIDpcbiAgICAgICAgICAgICAgICB0aGlzLl90cnlTdWJzY3JpYmUoc2luaykpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb25maWcudXNlRGVwcmVjYXRlZFN5bmNocm9ub3VzRXJyb3JIYW5kbGluZykge1xuICAgICAgICAgICAgaWYgKHNpbmsuc3luY0Vycm9yVGhyb3dhYmxlKSB7XG4gICAgICAgICAgICAgICAgc2luay5zeW5jRXJyb3JUaHJvd2FibGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoc2luay5zeW5jRXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgc2luay5zeW5jRXJyb3JWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNpbms7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLnByb3RvdHlwZS5fdHJ5U3Vic2NyaWJlID0gZnVuY3Rpb24gKHNpbmspIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpYmUoc2luayk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgaWYgKGNvbmZpZy51c2VEZXByZWNhdGVkU3luY2hyb25vdXNFcnJvckhhbmRsaW5nKSB7XG4gICAgICAgICAgICAgICAgc2luay5zeW5jRXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNpbmsuc3luY0Vycm9yVmFsdWUgPSBlcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2FuUmVwb3J0RXJyb3Ioc2luaykpIHtcbiAgICAgICAgICAgICAgICBzaW5rLmVycm9yKGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChuZXh0LCBwcm9taXNlQ3Rvcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBwcm9taXNlQ3RvciA9IGdldFByb21pc2VDdG9yKHByb21pc2VDdG9yKTtcbiAgICAgICAgcmV0dXJuIG5ldyBwcm9taXNlQ3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB2YXIgc3Vic2NyaXB0aW9uO1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uID0gX3RoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHQodmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHJlamVjdCwgcmVzb2x2ZSk7XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLnNvdXJjZTtcbiAgICAgICAgcmV0dXJuIHNvdXJjZSAmJiBzb3VyY2Uuc3Vic2NyaWJlKHN1YnNjcmliZXIpO1xuICAgIH07XG4gICAgT2JzZXJ2YWJsZS5wcm90b3R5cGVbU3ltYm9sX29ic2VydmFibGVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLnBpcGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvcGVyYXRpb25zID0gW107XG4gICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgICBvcGVyYXRpb25zW19pXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wZXJhdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGlwZUZyb21BcnJheShvcGVyYXRpb25zKSh0aGlzKTtcbiAgICB9O1xuICAgIE9ic2VydmFibGUucHJvdG90eXBlLnRvUHJvbWlzZSA9IGZ1bmN0aW9uIChwcm9taXNlQ3Rvcikge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICBwcm9taXNlQ3RvciA9IGdldFByb21pc2VDdG9yKHByb21pc2VDdG9yKTtcbiAgICAgICAgcmV0dXJuIG5ldyBwcm9taXNlQ3RvcihmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgICAgICBfdGhpcy5zdWJzY3JpYmUoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHZhbHVlID0geDsgfSwgZnVuY3Rpb24gKGVycikgeyByZXR1cm4gcmVqZWN0KGVycik7IH0sIGZ1bmN0aW9uICgpIHsgcmV0dXJuIHJlc29sdmUodmFsdWUpOyB9KTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBPYnNlcnZhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKHN1YnNjcmliZSk7XG4gICAgfTtcbiAgICByZXR1cm4gT2JzZXJ2YWJsZTtcbn0oKSk7XG5leHBvcnQgeyBPYnNlcnZhYmxlIH07XG5mdW5jdGlvbiBnZXRQcm9taXNlQ3Rvcihwcm9taXNlQ3Rvcikge1xuICAgIGlmICghcHJvbWlzZUN0b3IpIHtcbiAgICAgICAgcHJvbWlzZUN0b3IgPSBjb25maWcuUHJvbWlzZSB8fCBQcm9taXNlO1xuICAgIH1cbiAgICBpZiAoIXByb21pc2VDdG9yKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignbm8gUHJvbWlzZSBpbXBsIGZvdW5kJyk7XG4gICAgfVxuICAgIHJldHVybiBwcm9taXNlQ3Rvcjtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPU9ic2VydmFibGUuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9TdWJzY3JpYmVyLF9zeW1ib2xfcnhTdWJzY3JpYmVyLF9PYnNlcnZlciBQVVJFX0lNUE9SVFNfRU5EICovXG5pbXBvcnQgeyBTdWJzY3JpYmVyIH0gZnJvbSAnLi4vU3Vic2NyaWJlcic7XG5pbXBvcnQgeyByeFN1YnNjcmliZXIgYXMgcnhTdWJzY3JpYmVyU3ltYm9sIH0gZnJvbSAnLi4vc3ltYm9sL3J4U3Vic2NyaWJlcic7XG5pbXBvcnQgeyBlbXB0eSBhcyBlbXB0eU9ic2VydmVyIH0gZnJvbSAnLi4vT2JzZXJ2ZXInO1xuZXhwb3J0IGZ1bmN0aW9uIHRvU3Vic2NyaWJlcihuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XG4gICAgaWYgKG5leHRPck9ic2VydmVyKSB7XG4gICAgICAgIGlmIChuZXh0T3JPYnNlcnZlciBpbnN0YW5jZW9mIFN1YnNjcmliZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXh0T3JPYnNlcnZlcjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXJbcnhTdWJzY3JpYmVyU3ltYm9sXSkge1xuICAgICAgICAgICAgcmV0dXJuIG5leHRPck9ic2VydmVyW3J4U3Vic2NyaWJlclN5bWJvbF0oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoIW5leHRPck9ic2VydmVyICYmICFlcnJvciAmJiAhY29tcGxldGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVyKGVtcHR5T2JzZXJ2ZXIpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFN1YnNjcmliZXIobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD10b1N1YnNjcmliZXIuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIF9TdWJzY3JpYmVyIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCB7IFN1YnNjcmliZXIgfSBmcm9tICcuLi9TdWJzY3JpYmVyJztcbmV4cG9ydCBmdW5jdGlvbiBjYW5SZXBvcnRFcnJvcihvYnNlcnZlcikge1xuICAgIHdoaWxlIChvYnNlcnZlcikge1xuICAgICAgICB2YXIgX2EgPSBvYnNlcnZlciwgY2xvc2VkXzEgPSBfYS5jbG9zZWQsIGRlc3RpbmF0aW9uID0gX2EuZGVzdGluYXRpb24sIGlzU3RvcHBlZCA9IF9hLmlzU3RvcHBlZDtcbiAgICAgICAgaWYgKGNsb3NlZF8xIHx8IGlzU3RvcHBlZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRlc3RpbmF0aW9uICYmIGRlc3RpbmF0aW9uIGluc3RhbmNlb2YgU3Vic2NyaWJlcikge1xuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBkZXN0aW5hdGlvbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9ic2VydmVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWNhblJlcG9ydEVycm9yLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCAgUFVSRV9JTVBPUlRTX0VORCAqL1xuZnVuY3Rpb24gT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JJbXBsKCkge1xuICAgIEVycm9yLmNhbGwodGhpcyk7XG4gICAgdGhpcy5tZXNzYWdlID0gJ29iamVjdCB1bnN1YnNjcmliZWQnO1xuICAgIHRoaXMubmFtZSA9ICdPYmplY3RVbnN1YnNjcmliZWRFcnJvcic7XG4gICAgcmV0dXJuIHRoaXM7XG59XG5PYmplY3RVbnN1YnNjcmliZWRFcnJvckltcGwucHJvdG90eXBlID0gLypAX19QVVJFX18qLyBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG5leHBvcnQgdmFyIE9iamVjdFVuc3Vic2NyaWJlZEVycm9yID0gT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3JJbXBsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9T2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IuanMubWFwXG4iLCIvKiogUFVSRV9JTVBPUlRTX1NUQVJUIHRzbGliLF9TdWJzY3JpcHRpb24gUFVSRV9JTVBPUlRTX0VORCAqL1xuaW1wb3J0ICogYXMgdHNsaWJfMSBmcm9tIFwidHNsaWJcIjtcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJy4vU3Vic2NyaXB0aW9uJztcbnZhciBTdWJqZWN0U3Vic2NyaXB0aW9uID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKFN1YmplY3RTdWJzY3JpcHRpb24sIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3ViamVjdFN1YnNjcmlwdGlvbihzdWJqZWN0LCBzdWJzY3JpYmVyKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLnN1YmplY3QgPSBzdWJqZWN0O1xuICAgICAgICBfdGhpcy5zdWJzY3JpYmVyID0gc3Vic2NyaWJlcjtcbiAgICAgICAgX3RoaXMuY2xvc2VkID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgU3ViamVjdFN1YnNjcmlwdGlvbi5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xvc2VkID0gdHJ1ZTtcbiAgICAgICAgdmFyIHN1YmplY3QgPSB0aGlzLnN1YmplY3Q7XG4gICAgICAgIHZhciBvYnNlcnZlcnMgPSBzdWJqZWN0Lm9ic2VydmVycztcbiAgICAgICAgdGhpcy5zdWJqZWN0ID0gbnVsbDtcbiAgICAgICAgaWYgKCFvYnNlcnZlcnMgfHwgb2JzZXJ2ZXJzLmxlbmd0aCA9PT0gMCB8fCBzdWJqZWN0LmlzU3RvcHBlZCB8fCBzdWJqZWN0LmNsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzdWJzY3JpYmVySW5kZXggPSBvYnNlcnZlcnMuaW5kZXhPZih0aGlzLnN1YnNjcmliZXIpO1xuICAgICAgICBpZiAoc3Vic2NyaWJlckluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgb2JzZXJ2ZXJzLnNwbGljZShzdWJzY3JpYmVySW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gU3ViamVjdFN1YnNjcmlwdGlvbjtcbn0oU3Vic2NyaXB0aW9uKSk7XG5leHBvcnQgeyBTdWJqZWN0U3Vic2NyaXB0aW9uIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1TdWJqZWN0U3Vic2NyaXB0aW9uLmpzLm1hcFxuIiwiLyoqIFBVUkVfSU1QT1JUU19TVEFSVCB0c2xpYixfT2JzZXJ2YWJsZSxfU3Vic2NyaWJlcixfU3Vic2NyaXB0aW9uLF91dGlsX09iamVjdFVuc3Vic2NyaWJlZEVycm9yLF9TdWJqZWN0U3Vic2NyaXB0aW9uLF9pbnRlcm5hbF9zeW1ib2xfcnhTdWJzY3JpYmVyIFBVUkVfSU1QT1JUU19FTkQgKi9cbmltcG9ydCAqIGFzIHRzbGliXzEgZnJvbSBcInRzbGliXCI7XG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAnLi9PYnNlcnZhYmxlJztcbmltcG9ydCB7IFN1YnNjcmliZXIgfSBmcm9tICcuL1N1YnNjcmliZXInO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAnLi9TdWJzY3JpcHRpb24nO1xuaW1wb3J0IHsgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IgfSBmcm9tICcuL3V0aWwvT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3InO1xuaW1wb3J0IHsgU3ViamVjdFN1YnNjcmlwdGlvbiB9IGZyb20gJy4vU3ViamVjdFN1YnNjcmlwdGlvbic7XG5pbXBvcnQgeyByeFN1YnNjcmliZXIgYXMgcnhTdWJzY3JpYmVyU3ltYm9sIH0gZnJvbSAnLi4vaW50ZXJuYWwvc3ltYm9sL3J4U3Vic2NyaWJlcic7XG52YXIgU3ViamVjdFN1YnNjcmliZXIgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoU3ViamVjdFN1YnNjcmliZXIsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gU3ViamVjdFN1YnNjcmliZXIoZGVzdGluYXRpb24pIHtcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVzdGluYXRpb24pIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIFN1YmplY3RTdWJzY3JpYmVyO1xufShTdWJzY3JpYmVyKSk7XG5leHBvcnQgeyBTdWJqZWN0U3Vic2NyaWJlciB9O1xudmFyIFN1YmplY3QgPSAvKkBfX1BVUkVfXyovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgdHNsaWJfMS5fX2V4dGVuZHMoU3ViamVjdCwgX3N1cGVyKTtcbiAgICBmdW5jdGlvbiBTdWJqZWN0KCkge1xuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzO1xuICAgICAgICBfdGhpcy5vYnNlcnZlcnMgPSBbXTtcbiAgICAgICAgX3RoaXMuY2xvc2VkID0gZmFsc2U7XG4gICAgICAgIF90aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgICBfdGhpcy5oYXNFcnJvciA9IGZhbHNlO1xuICAgICAgICBfdGhpcy50aHJvd25FcnJvciA9IG51bGw7XG4gICAgICAgIHJldHVybiBfdGhpcztcbiAgICB9XG4gICAgU3ViamVjdC5wcm90b3R5cGVbcnhTdWJzY3JpYmVyU3ltYm9sXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTdWJqZWN0U3Vic2NyaWJlcih0aGlzKTtcbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLmxpZnQgPSBmdW5jdGlvbiAob3BlcmF0b3IpIHtcbiAgICAgICAgdmFyIHN1YmplY3QgPSBuZXcgQW5vbnltb3VzU3ViamVjdCh0aGlzLCB0aGlzKTtcbiAgICAgICAgc3ViamVjdC5vcGVyYXRvciA9IG9wZXJhdG9yO1xuICAgICAgICByZXR1cm4gc3ViamVjdDtcbiAgICB9O1xuICAgIFN1YmplY3QucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgICB2YXIgb2JzZXJ2ZXJzID0gdGhpcy5vYnNlcnZlcnM7XG4gICAgICAgICAgICB2YXIgbGVuID0gb2JzZXJ2ZXJzLmxlbmd0aDtcbiAgICAgICAgICAgIHZhciBjb3B5ID0gb2JzZXJ2ZXJzLnNsaWNlKCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgY29weVtpXS5uZXh0KHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYXNFcnJvciA9IHRydWU7XG4gICAgICAgIHRoaXMudGhyb3duRXJyb3IgPSBlcnI7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIG9ic2VydmVycyA9IHRoaXMub2JzZXJ2ZXJzO1xuICAgICAgICB2YXIgbGVuID0gb2JzZXJ2ZXJzLmxlbmd0aDtcbiAgICAgICAgdmFyIGNvcHkgPSBvYnNlcnZlcnMuc2xpY2UoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgY29weVtpXS5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA9IDA7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHZhciBvYnNlcnZlcnMgPSB0aGlzLm9ic2VydmVycztcbiAgICAgICAgdmFyIGxlbiA9IG9ic2VydmVycy5sZW5ndGg7XG4gICAgICAgIHZhciBjb3B5ID0gb2JzZXJ2ZXJzLnNsaWNlKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGNvcHlbaV0uY29tcGxldGUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9ic2VydmVycy5sZW5ndGggPSAwO1xuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jbG9zZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLm9ic2VydmVycyA9IG51bGw7XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5fdHJ5U3Vic2NyaWJlID0gZnVuY3Rpb24gKHN1YnNjcmliZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuY2xvc2VkKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgT2JqZWN0VW5zdWJzY3JpYmVkRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBfc3VwZXIucHJvdG90eXBlLl90cnlTdWJzY3JpYmUuY2FsbCh0aGlzLCBzdWJzY3JpYmVyKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgU3ViamVjdC5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChzdWJzY3JpYmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmNsb3NlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IE9iamVjdFVuc3Vic2NyaWJlZEVycm9yKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5oYXNFcnJvcikge1xuICAgICAgICAgICAgc3Vic2NyaWJlci5lcnJvcih0aGlzLnRocm93bkVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBTdWJzY3JpcHRpb24uRU1QVFk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICAgIHN1YnNjcmliZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgIHJldHVybiBTdWJzY3JpcHRpb24uRU1QVFk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmVycy5wdXNoKHN1YnNjcmliZXIpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdWJqZWN0U3Vic2NyaXB0aW9uKHRoaXMsIHN1YnNjcmliZXIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBTdWJqZWN0LnByb3RvdHlwZS5hc09ic2VydmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGUoKTtcbiAgICAgICAgb2JzZXJ2YWJsZS5zb3VyY2UgPSB0aGlzO1xuICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZTtcbiAgICB9O1xuICAgIFN1YmplY3QuY3JlYXRlID0gZnVuY3Rpb24gKGRlc3RpbmF0aW9uLCBzb3VyY2UpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNTdWJqZWN0KGRlc3RpbmF0aW9uLCBzb3VyY2UpO1xuICAgIH07XG4gICAgcmV0dXJuIFN1YmplY3Q7XG59KE9ic2VydmFibGUpKTtcbmV4cG9ydCB7IFN1YmplY3QgfTtcbnZhciBBbm9ueW1vdXNTdWJqZWN0ID0gLypAX19QVVJFX18qLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIHRzbGliXzEuX19leHRlbmRzKEFub255bW91c1N1YmplY3QsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gQW5vbnltb3VzU3ViamVjdChkZXN0aW5hdGlvbiwgc291cmNlKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpIHx8IHRoaXM7XG4gICAgICAgIF90aGlzLmRlc3RpbmF0aW9uID0gZGVzdGluYXRpb247XG4gICAgICAgIF90aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBBbm9ueW1vdXNTdWJqZWN0LnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIGlmIChkZXN0aW5hdGlvbiAmJiBkZXN0aW5hdGlvbi5uZXh0KSB7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbi5uZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgQW5vbnltb3VzU3ViamVjdC5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHZhciBkZXN0aW5hdGlvbiA9IHRoaXMuZGVzdGluYXRpb247XG4gICAgICAgIGlmIChkZXN0aW5hdGlvbiAmJiBkZXN0aW5hdGlvbi5lcnJvcikge1xuICAgICAgICAgICAgdGhpcy5kZXN0aW5hdGlvbi5lcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBBbm9ueW1vdXNTdWJqZWN0LnByb3RvdHlwZS5jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRlc3RpbmF0aW9uID0gdGhpcy5kZXN0aW5hdGlvbjtcbiAgICAgICAgaWYgKGRlc3RpbmF0aW9uICYmIGRlc3RpbmF0aW9uLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICB0aGlzLmRlc3RpbmF0aW9uLmNvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIEFub255bW91c1N1YmplY3QucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlcikge1xuICAgICAgICB2YXIgc291cmNlID0gdGhpcy5zb3VyY2U7XG4gICAgICAgIGlmIChzb3VyY2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUoc3Vic2NyaWJlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gU3Vic2NyaXB0aW9uLkVNUFRZO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gQW5vbnltb3VzU3ViamVjdDtcbn0oU3ViamVjdCkpO1xuZXhwb3J0IHsgQW5vbnltb3VzU3ViamVjdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9U3ViamVjdC5qcy5tYXBcbiIsImltcG9ydCB7U2ltdWxhdGlvblBhY2thZ2V9IGZyb20gXCIuL1NpbXVsYXRpb25QYWNrYWdlXCI7XHJcbmltcG9ydCB7U3ViamVjdH0gZnJvbSBcInJ4anNcIjtcclxuaW1wb3J0IHtNaW5pbWFsU3BhblRyZWV9IGZyb20gXCIuLi9TcGFubmluZ1RyZWUvbWluaW1hbFNwYW5uaW5nVHJlZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNpbXVsYXRpb25Db25uZWN0aW9ue1xyXG5cdHB1YmxpYyBzZW5kOiBTdWJqZWN0PFNpbXVsYXRpb25QYWNrYWdlPiA9IG5ldyBTdWJqZWN0PFNpbXVsYXRpb25QYWNrYWdlPigpO1xyXG5cdHB1YmxpYyByZWNlaXZlOiBTdWJqZWN0PFNpbXVsYXRpb25QYWNrYWdlPiA9IG5ldyBTdWJqZWN0PFNpbXVsYXRpb25QYWNrYWdlPigpO1xyXG5cdHB1YmxpYyBwaW5nOiBQcm9taXNlPHN0cmluZ1tdPjtcclxuXHRjb25zdHJ1Y3RvcihzaWJsaW5nQnJpZGdlczogc3RyaW5nW10pe1xyXG5cdFx0dGhpcy5waW5nID0gbmV3IFByb21pc2U8c3RyaW5nW10+KHJlc29sdmUgPT4gcmVzb2x2ZShzaWJsaW5nQnJpZGdlcykpO1xyXG5cdH1cclxuXHRwdWJsaWMgZmluaXNoZWRJbmRleGluZzogU3ViamVjdDxNaW5pbWFsU3BhblRyZWV8YW55PiA9IG5ldyBTdWJqZWN0KCk7XHJcbn1cclxuIiwiaW1wb3J0IHtTcGFubmluZ1RyZWVOb2RlfSBmcm9tIFwiLi4vU3Bhbm5pbmdUcmVlL3NwYW5uaW5nVHJlZU5vZGVcIjtcclxuaW1wb3J0IHtCcmlkZ2V9IGZyb20gXCIuL0JyaWRnZVwiO1xyXG5pbXBvcnQge1NpbXVsYXRpb25Db25uZWN0aW9ufSBmcm9tIFwiLi9TaW11bGF0aW9uQ29ubmVjdGlvblwiO1xyXG5pbXBvcnQge1NpbXVsYXRpb25QYWNrYWdlfSBmcm9tIFwiLi9TaW11bGF0aW9uUGFja2FnZVwiO1xyXG5pbXBvcnQge01pbmltYWxTcGFuVHJlZX0gZnJvbSBcIi4uL1NwYW5uaW5nVHJlZS9taW5pbWFsU3Bhbm5pbmdUcmVlXCI7XHJcbmltcG9ydCB7U3Bhbm5pbmdUcmVlTGlua30gZnJvbSBcIi4uL1NwYW5uaW5nVHJlZS9zcGFubmluZ1RyZWVMaW5rXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU2ltdWxhdGlvbiB7XHJcbiAgICBwdWJsaWMgYnJpZGdlczogQnJpZGdlW10gPSBbXTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgbm9kZXM6IFNwYW5uaW5nVHJlZU5vZGVbXSwgbXVsdGlwbGljYXRvckZvckNvc3RJblNlY29uZHMgPSAwLjUpIHtcclxuICAgICAgICBjb25zdCB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyX3RhcmdldCcpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgICAgIHRhcmdldC5jaGlsZE5vZGVzLmZvckVhY2gobiA9PiBuLnJlbW92ZSgpKTtcclxuICAgICAgICB0YXJnZXQuY2hpbGROb2Rlcy5mb3JFYWNoKG4gPT4gbi5yZW1vdmUoKSk7XHJcbiAgICAgICAgdGFyZ2V0LmNoaWxkTm9kZXMuZm9yRWFjaChuID0+IG4ucmVtb3ZlKCkpO1xyXG4gICAgICAgIGNvbnN0IGluaXRpYWxQYWNrYWdlc1RlbXBsYXRlID1gXHJcbjxkaXYgY2xhc3M9XCJpdGVtXCIgaWQ9XCJpbml0X3BrZ1wiPlxyXG4gICAgPGgzPlBhY2thZ2VzOjwvaDM+XHJcbiAgICA8ZGl2IGlkPVwicGtnX3NfdGFyZ2V0XCI+XHJcblxyXG4gICAgPC9kaXY+XHJcbjwvZGl2PlxyXG5gO1xyXG4gICAgICAgIHRhcmdldC5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJiZWZvcmVlbmRcIiwgbmV3IERPTVBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhpbml0aWFsUGFja2FnZXNUZW1wbGF0ZSwgXCJ0ZXh0L2h0bWxcIikuZ2V0RWxlbWVudEJ5SWQoYGluaXRfcGtnYCkpO1xyXG4gICAgICAgIG5vZGVzLmZvckVhY2gobm9kZSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBzaWJsaW5nTm9kZXMgPSBub2RlLmxpbmtzLm1hcChsID0+IGwudG9Ob2RlKTtcclxuICAgICAgICAgICAgY29uc3QgY29ubiA9IG5ldyBTaW11bGF0aW9uQ29ubmVjdGlvbihzaWJsaW5nTm9kZXMpO1xyXG4gICAgICAgICAgICB0aGlzLmJyaWRnZXMucHVzaChuZXcgQnJpZGdlKG5vZGUubmFtZSwgbm9kZS52YWx1ZSwgY29ubiwgdGhpcy5kdW1wQnJpZGdlKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gYWxsb3cgY29tbXVuaWNhdGlvbiBiZXR3ZWVuIGRpcmVjdCBjb25uZWN0ZWQgYnJpZGdlc1xyXG4gICAgICAgIHRoaXMuYnJpZGdlcy5mb3JFYWNoKGJyaWRnZSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBsaW5rczogU3Bhbm5pbmdUcmVlTGlua1tdID0gbm9kZXMuZmluZChuID0+IG4ubmFtZSA9PT0gYnJpZGdlLm5hbWUpLmxpbmtzO1xyXG4gICAgICAgICAgICBsZXQgc2libGluZ05vZGVzID0gbGlua3MubWFwKGwgPT4gbC50b05vZGUpO1xyXG4gICAgICAgICAgICBicmlkZ2UuY29ubmVjdGlvbi5zZW5kLnN1YnNjcmliZSgocGtnOiBTaW11bGF0aW9uUGFja2FnZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYCR7YnJpZGdlLm5hbWV9Pj4+JHtwa2cudGFyZ2V0fWApO1xyXG4gICAgICAgICAgICAgICAgbGV0IGNvbm5lY3RlZE5vZGUgPSBzaWJsaW5nTm9kZXMuZmluZChuID0+IG4gPT09IHBrZy50YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCEhY29ubmVjdGVkTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBrZy5jb3N0ID0gbGlua3MuZmluZChsID0+IGwudG9Ob2RlID09PSBwa2cudGFyZ2V0KS5jb3N0O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNiID0gdGhpcy5kdW1wUGtnKHBrZywgYnJpZGdlLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2IoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnJpZGdlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKGIgPT4gYi5uYW1lID09PSBwa2cudGFyZ2V0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb25uZWN0aW9uLnJlY2VpdmUubmV4dChwa2cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwa2cuY29zdCAqIDEwMDAgKiBtdWx0aXBsaWNhdG9yRm9yQ29zdEluU2Vjb25kcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlRG9tQnJpZGdlcygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGFydEluZGV4aW5nRnJvbVJhbmRvbUJyaWRnZTogKCkgPT4gUHJvbWlzZTxNaW5pbWFsU3BhblRyZWU+ID0gKCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxNaW5pbWFsU3BhblRyZWU+KGFzeW5jIHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBicmlkZ2UgPSB0aGlzLmJyaWRnZXNbTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogdGhpcy5icmlkZ2VzLmxlbmd0aCldO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmJyaWRnZXMsIGJyaWRnZSk7XHJcbiAgICAgICAgICAgIGJyaWRnZS5jb25uZWN0aW9uLmZpbmlzaGVkSW5kZXhpbmcuc3Vic2NyaWJlKChtc3QpID0+IHJlc29sdmUobXN0KSk7XHJcbiAgICAgICAgICAgIGJyaWRnZS5pbmRleE5ldHdvcmsoKS50aGVuKCgpID0+IGNvbnNvbGUubG9nKCd3dGYnKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcHJpdmF0ZSBpZCA9IDA7XHJcblxyXG4gICAgcHJpdmF0ZSBkdW1wUGtnKHBrZzogU2ltdWxhdGlvblBhY2thZ2UsIGZyb206IHN0cmluZyk6ICgpID0+IHZvaWQge1xyXG5cclxuICAgICAgICBjb25zdCBwa2dfc190YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncGtnX3NfdGFyZ2V0JykgYXMgSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gICAgICAgIGxldCBudW1iZXIgPSB0aGlzLmlkKys7XHJcbiAgICAgICAgY29uc3QgcGtnVGVtcGxhdGUgPSAocGtnOiBTaW11bGF0aW9uUGFja2FnZSwgZnJvbTogc3RyaW5nKSA9PiBgXHJcbjxkaXYgaWQ9XCJwa2dfJHtudW1iZXJ9XCI+XHJcbiAgICAke2Zyb219IC0+ICR7cGtnLnRhcmdldH0gOiAke3BrZy5jb3N0fVxyXG48L2Rpdj5cclxuYDtcclxuICAgICAgICBwa2dfc190YXJnZXQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYmVmb3JlZW5kXCIsIG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcocGtnVGVtcGxhdGUocGtnLCBmcm9tKSwgXCJ0ZXh0L2h0bWxcIikuZ2V0RWxlbWVudEJ5SWQoYHBrZ18ke251bWJlcn1gKSk7XHJcbiAgICAgICAgLy9wa2dfc190YXJnZXQuKG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcocGtnVGVtcGxhdGUocGtnLCBmcm9tKSwgXCJ0ZXh0L2h0bWxcIikuZ2V0RWxlbWVudEJ5SWQoYHBrZ18ke251bWJlcn1gKSk7XHJcbiAgICAgICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAgICAgcGtnX3NfdGFyZ2V0LnJlbW92ZUNoaWxkKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBwa2dfJHtudW1iZXJ9YCkpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlRG9tQnJpZGdlcygpIHtcclxuICAgICAgICBjb25zdCB0YXJnZXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29udGFpbmVyX3RhcmdldCcpIGFzIEhUTUxEaXZFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IGJyaWRnZVRlbXBsYXRlID0gKGJyaWRnZTogQnJpZGdlKSA9PiBgXHJcbjxkaXYgY2xhc3M9XCJpdGVtXCIgaWQ9XCJicmlkZ2VfJHticmlkZ2UudmFsdWV9XCI+XHJcbiAgICA8aDM+QnJpZGdlICR7YnJpZGdlLm5hbWV9PC9oMz5cclxuPC9kaXY+XHJcbmA7XHJcbiAgICAgICAgdGhpcy5icmlkZ2VzLnNvcnQoKGEsIGIpID0+IHtcclxuICAgICAgICAgICAgaWYgKGEubmFtZSA8IGIubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhLm5hbWUgPiBiLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH0pLmZvckVhY2goYnJpZGdlID0+IHtcclxuICAgICAgICAgICAgdGFyZ2V0Lmluc2VydEFkamFjZW50RWxlbWVudChcImJlZm9yZWVuZFwiLCBuZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGJyaWRnZVRlbXBsYXRlKGJyaWRnZSksIFwidGV4dC9odG1sXCIpLmdldEVsZW1lbnRCeUlkKGBicmlkZ2VfJHticmlkZ2UudmFsdWV9YCkpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgZHVtcEJyaWRnZShicmlkZ2U6IEJyaWRnZSkge1xyXG4gICAgICAgIGNvbnN0IGJyaWRnZVRlbXBsYXRlID0gKGJyaWRnZTogQnJpZGdlKSA9PiBgXHJcbjxkaXYgY2xhc3M9XCJpdGVtXCIgaWQ9XCJicmlkZ2VfJHticmlkZ2UudmFsdWV9XCI+XHJcbiAgICA8ZGl2IHN0eWxlPVwid2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgb3ZlcmZsb3cteTogYXV0b1wiPlxyXG4gICAgICAgIDxoMz5CcmlkZ2UgJHticmlkZ2UubmFtZX08L2gzPlxyXG4gICAgICAgICR7YnJpZGdlLnJvb3RPZkluZGV4aW5nPydJbmRleGluZyBSb290ISc6ICcnfTxicj5cclxuICAgICAgICBLbm93biBsaW5rczogWzxicj48QkxPQ0tRVU9URT4ke2JyaWRnZS5ESVNDT1ZFUkVEX0xJTktTLm1hcChsID0+IGwubm9kZXMubWFwKG4gPT4gbi5uYW1lKS5qb2luKCctJykgKyAnOicgKyBsLmNvc3QpLmpvaW4oJyw8YnI+Jyl9PC9CTE9DS1FVT1RFPjxicj5dPGJyPlxyXG4gICAgICAgICR7IWJyaWRnZS5yb290T2ZJbmRleGluZyAmJiBicmlkZ2UuSU5ERVhFRCA/IGBOb2RlIGhhcyBmaW5pc2hlZCBpbmRleGluZyE8YnI+UmV0dXJuaW5nIERhdGEgdG86IFs8YnI+PEJMT0NLUVVPVEU+JHticmlkZ2UucmV0dXJuVG8uam9pbignLDxicj4nKX08L0JMT0NLUVVPVEU+PGJyPl1gOiAnJ31cclxuICAgICAgICAke2JyaWRnZS5yb290T2ZJbmRleGluZyAmJiBicmlkZ2UuSU5ERVhFRCA/IGBOZXR3b3JrIGhhcyBmaW5pc2hlZCBpbmRleGluZyE8YnI+TVNUIGdlbmVyYXRlZC48YnI+U2VuZGluZyBNU1QgdG86IFs8YnI+PEJMT0NLUVVPVEU+JHticmlkZ2UuTVNULmFsbE5vZGVzLm1hcChuID0+IG4ubmFtZSkuZmlsdGVyKHMgPT4gcyAhPT0gYnJpZGdlLm5hbWUpLmpvaW4oJyw8YnI+Jyl9PC9CTE9DS1FVT1RFPjxicj5dYDogJyd9XHJcbiAgICAgICAgXHJcbiAgICA8L2Rpdj5cclxuPC9kaXY+XHJcbmA7XHJcbiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgYnJpZGdlXyR7YnJpZGdlLnZhbHVlfWApO1xyXG4gICAgICAgIGVsLnJlcGxhY2VXaXRoKG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoYnJpZGdlVGVtcGxhdGUoYnJpZGdlKSwgXCJ0ZXh0L2h0bWxcIikuZ2V0RWxlbWVudEJ5SWQoYGJyaWRnZV8ke2JyaWRnZS52YWx1ZX1gKSlcclxuICAgIH1cclxuXHJcbn1cclxuIiwiICAgIC8vIHJlZmVyZW5jZXMgdG8gdGhlIGRvbVxyXG5pbXBvcnQge3BhcnNlLCBzdHJpbmdpZnl9IGZyb20gXCIuL3BhcnNlclwiO1xyXG5pbXBvcnQge1NpbXVsYXRpb259IGZyb20gXCIuL21vZGVscy9TaW11bGF0aW9uL1NpbXVsYXRpb25cIjtcclxuaW1wb3J0IHtTaW11bGF0aW9uUGFja2FnZX0gZnJvbSBcIi4vbW9kZWxzL1NpbXVsYXRpb24vU2ltdWxhdGlvblBhY2thZ2VcIjtcclxuXHJcbmNvbnN0IGlucHV0QXJlYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZXh0SW4nKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50O1xyXG5jb25zdCBvdXRwdXRBcmVhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RleHRPdXQnKSBhcyBIVE1MVGV4dEFyZWFFbGVtZW50O1xyXG5jb25zdCBzaW11bGF0aW9uQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpbXVsYXRlX2J0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG5cclxuXHJcblxyXG5jb25zdCBzaW1wbGVUZXN0ID0gYFxyXG5HcmFwaCBteWdyYXBoIHtcclxuXHQvLyBOb2RlXHJcblx0QSA9IDI7XHJcblx0QiA9IDE7XHJcblx0QyA9IDM7XHJcblx0XHJcblx0Ly8gTGlua3MgdW5kIHp1Z2VoLiBLb3N0ZW5cclxuXHRBIC0gQiA6IDE7XHJcblx0QSAtIEMgOiAxO1xyXG5cdEMgLSBCIDogMjtcclxufWA7XHJcbmNvbnN0IHRlc3QgPSBgXHJcbkdyYXBoIG15Z3JhcGgge1xyXG5cdC8vIE5vZGVcclxuXHRBID0gNTtcclxuXHRCID0gMTtcclxuXHRDID0gMztcclxuXHREID0gNztcclxuXHRFID0gNjtcclxuXHRGID0gNDtcclxuXHRcclxuXHQvLyBMaW5rcyB1bmQgenVnZWguIEtvc3RlblxyXG5cdEEgLSBCIDogMTA7XHJcblx0QSAtIEMgOiAxMDtcclxuXHRCIC0gRCA6IDE1O1xyXG5cdEIgLSBFIDogMTA7XHJcblx0QyAtIEQgOiAzO1xyXG5cdEMgLSBFIDogMTA7XHJcblx0RCAtIEUgOiAyO1xyXG5cdEQgLSBGIDogMTA7XHJcblx0RSAtIEYgOiAyO1xyXG59YDtcclxuaW5wdXRBcmVhLnZhbHVlID0gdGVzdDtcclxuY29uc29sZS5sb2coaW5wdXRBcmVhKTtcclxuLy8gY2xpY2sgaW1wbFxyXG5jb25zdCBvblNpbXVsYXRpb25DbGljayA9ICgpID0+IHtcclxuICAgIGNvbnN0IHBhcnNlUmVzdWx0ID0gcGFyc2UoaW5wdXRBcmVhLnZhbHVlKTtcclxuICAgIGNvbnN0IHNpbXVsYXRpb24gPSBuZXcgU2ltdWxhdGlvbihwYXJzZVJlc3VsdC5ub2RlcywgKyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXVsdCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlKTtcclxuICAgIGNvbnNvbGUubG9nKHNpbXVsYXRpb24pO1xyXG4gICAgc2ltdWxhdGlvbi5zdGFydEluZGV4aW5nRnJvbVJhbmRvbUJyaWRnZSgpLnRoZW4obXN0ID0+IHtcclxuICAgICAgICBvdXRwdXRBcmVhLnZhbHVlID0gc3RyaW5naWZ5KG1zdCwgcGFyc2VSZXN1bHQuZ3JhcGhOYW1lKTtcclxuICAgIH0pXHJcbn07XHJcblxyXG4vLyBjYWxsIGNsaWNrIGltcGwgb24gc2ltdWxhdGlvbkJ1dHRvbiBjbGlja1xyXG5zaW11bGF0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25TaW11bGF0aW9uQ2xpY2spO1xyXG4iLCJpbXBvcnQge1NwYW5uaW5nVHJlZUxpbmt9IGZyb20gXCIuLi9tb2RlbHMvU3Bhbm5pbmdUcmVlL3NwYW5uaW5nVHJlZUxpbmtcIjtcclxuaW1wb3J0IHtTcGFubmluZ1RyZWVOb2RlfSBmcm9tIFwiLi4vbW9kZWxzL1NwYW5uaW5nVHJlZS9zcGFubmluZ1RyZWVOb2RlXCI7XHJcblxyXG5leHBvcnQgY29uc3QgcGFyc2U6IChpbnB1dDogc3RyaW5nKSA9PiB7Z3JhcGhOYW1lOiBzdHJpbmcsIG5vZGVzOiBTcGFubmluZ1RyZWVOb2RlW119ID1cclxuXHQoaW5wdXQ6IHN0cmluZykgPT4ge1xyXG5cdFx0Y29uc3QgdGVtcExpbmtzOiB7bm9kZXM6IHN0cmluZ1tdLCBjb3N0OiBudW1iZXJ9W10gPSBbXTtcclxuXHRcdGNvbnN0IG5vZGVzOiBTcGFubmluZ1RyZWVOb2RlW10gPSBbXTtcclxuXHRcdGNvbnN0IGdyYXBoTmFtZSA9IGlucHV0Lm1hdGNoKC8oPzw9R3JhcGhbIF0pKFxcUyspL2cpWzBdO1xyXG5cdFx0Y29uc3Qgbm9kZU1hdGNoZXMgPSBpbnB1dC5tYXRjaCgvW15cXHNdKyg/PSA9KXwoPzw9PSApWzEtOV0qL2cpO1xyXG5cdFx0Y29uc3QgbGlua01hdGNoZXMgPSBpbnB1dC5tYXRjaCgvW15cXHNdKyg/PSAtKXxbXlxcc10rKD89IDopfCg/PD06IClbMC05XSovZyk7XHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxpbmtNYXRjaGVzLmxlbmd0aDsgaSA9IGkgKyAzKSB7XHJcblx0XHRcdHRlbXBMaW5rcy5wdXNoKHtcclxuXHRcdFx0XHRub2RlczogW2xpbmtNYXRjaGVzW2ldLCBsaW5rTWF0Y2hlc1tpICsgMV1dLFxyXG5cdFx0XHRcdGNvc3Q6ICtsaW5rTWF0Y2hlc1tpICsgMl0gLy8gc29tZSBsaXR0bGUgdHJpY2sgdG8gY2FzdCBhIHN0cmluZyB0byBudW1iZXIgKyc0JyA9PT0gNFxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZU1hdGNoZXMubGVuZ3RoOyBpID0gaSArIDIpIHtcclxuXHRcdFx0Y29uc3QgbmFtZSA9IG5vZGVNYXRjaGVzW2ldO1xyXG5cdFx0XHRjb25zdCB2YWx1ZSA9ICtub2RlTWF0Y2hlc1tpICsgMV07XHJcblx0XHRcdGNvbnN0IGxpbmtzID0gdGVtcExpbmtzLmZpbHRlcihsID0+IGwubm9kZXMuZmluZEluZGV4KG4gPT4gbiA9PT0gbmFtZSkgIT09IC0xKVxyXG5cdFx0XHRcdC5tYXAobGluayA9PiBuZXcgU3Bhbm5pbmdUcmVlTGluayhsaW5rLm5vZGVzLmZpbmQobiA9PiBuICE9PSBuYW1lKSwgbGluay5jb3N0KSk7XHJcblx0XHRcdG5vZGVzLnB1c2gobmV3IFNwYW5uaW5nVHJlZU5vZGUobmFtZSwgdmFsdWUsIGxpbmtzKSk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRncmFwaE5hbWUsXHJcblx0XHRcdG5vZGVzXHJcblx0XHR9XHJcblx0fTtcclxuIiwiaW1wb3J0IHtNaW5pbWFsU3BhblRyZWV9IGZyb20gXCIuLi9tb2RlbHMvU3Bhbm5pbmdUcmVlL21pbmltYWxTcGFubmluZ1RyZWVcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBzdHJpbmdpZnk6IChtaW5pbWFsU3BhblRyZWU6IE1pbmltYWxTcGFuVHJlZSwgbmFtZTogc3RyaW5nKSA9PiBzdHJpbmcgPVxyXG5cdChtaW5pbWFsU3BhblRyZWUsIG5hbWU6IHN0cmluZykgPT4gYFxyXG5TcGFubmluZy1UcmVlIG9mICR7bmFtZX0ge1xyXG5cdFJvb3Q6ICR7bWluaW1hbFNwYW5UcmVlLnJvb3QubmFtZX07XHJcblx0JHttaW5pbWFsU3BhblRyZWUubGlua1RvU3RyaW5nKCl9XHJcbn1gO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9